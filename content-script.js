(()=>{"use strict";const t=document.createElement("div");t.classList.add("fuzzy-tab-search-parent"),t.tabIndex=0;const e=document.createElement("ul");e.classList.add("fuzzy-tab-search-tab-list");const n=document.createElement("input");function s(t){return Array.isArray?Array.isArray(t):"[object Array]"===h(t)}function i(t){return"string"==typeof t}function r(t){return"number"==typeof t}function c(t){return"object"==typeof t}function o(t){return null!=t}function a(t){return!t.trim().length}function h(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}n.classList.add("fuzzy-tab-search-search-box"),n.autofocus=!0;const l=Object.prototype.hasOwnProperty;class u{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach((t=>{let n=d(t);this._keys.push(n),this._keyMap[n.id]=n,e+=n.weight})),this._keys.forEach((t=>{t.weight/=e}))}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function d(t){let e=null,n=null,r=null,c=1,o=null;if(i(t)||s(t))r=t,e=g(t),n=f(t);else{if(!l.call(t,"name"))throw new Error("Missing name property in key");const s=t.name;if(r=s,l.call(t,"weight")&&(c=t.weight,c<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(s));e=g(s),n=f(s),o=t.getFn}return{path:e,id:n,weight:c,src:r,getFn:o}}function g(t){return s(t)?t:t.split(".")}function f(t){return s(t)?t.join("."):t}var p={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(t,e){let n=[],a=!1;const l=(t,e,u)=>{if(o(t))if(e[u]){const d=t[e[u]];if(!o(d))return;if(u===e.length-1&&(i(d)||r(d)||function(t){return!0===t||!1===t||function(t){return c(t)&&null!==t}(t)&&"[object Boolean]"==h(t)}(d)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(d));else if(s(d)){a=!0;for(let t=0,n=d.length;t<n;t+=1)l(d[t],e,u+1)}else e.length&&l(d,e,u+1)}else n.push(t)};return l(t,i(e)?e.split("."):e,0),a?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};const m=/[^ ]+/g;class y{constructor({getFn:t=p.getFn,fieldNormWeight:e=p.fieldNormWeight}={}){this.norm=function(t=1,e=3){const n=new Map,s=Math.pow(10,e);return{get(e){const i=e.match(m).length;if(n.has(i))return n.get(i);const r=1/Math.pow(i,.5*t),c=parseFloat(Math.round(r*s)/s);return n.set(i,c),c},clear(){n.clear()}}}(e,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach(((t,e)=>{this._keysMap[t.id]=e}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,i(this.docs[0])?this.docs.forEach(((t,e)=>{this._addString(t,e)})):this.docs.forEach(((t,e)=>{this._addObject(t,e)})),this.norm.clear())}add(t){const e=this.size();i(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!o(t)||a(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach(((e,r)=>{let c=e.getFn?e.getFn(t):this.getFn(t,e.path);if(o(c))if(s(c)){let t=[];const e=[{nestedArrIndex:-1,value:c}];for(;e.length;){const{nestedArrIndex:n,value:r}=e.pop();if(o(r))if(i(r)&&!a(r)){let e={v:r,i:n,n:this.norm.get(r)};t.push(e)}else s(r)&&r.forEach(((t,n)=>{e.push({nestedArrIndex:n,value:t})}))}n.$[r]=t}else if(i(c)&&!a(c)){let t={v:c,n:this.norm.get(c)};n.$[r]=t}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function M(t,e,{getFn:n=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){const i=new y({getFn:n,fieldNormWeight:s});return i.setKeys(t.map(d)),i.setSources(e),i.create(),i}function x(t,{errors:e=0,currentLocation:n=0,expectedLocation:s=0,distance:i=p.distance,ignoreLocation:r=p.ignoreLocation}={}){const c=e/t.length;if(r)return c;const o=Math.abs(s-n);return i?c+o/i:o?1:c}const L=32;function k(t){let e={};for(let n=0,s=t.length;n<s;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<s-n-1}return e}class v{constructor(t,{location:e=p.location,threshold:n=p.threshold,distance:s=p.distance,includeMatches:i=p.includeMatches,findAllMatches:r=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,isCaseSensitive:o=p.isCaseSensitive,ignoreLocation:a=p.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:s,includeMatches:i,findAllMatches:r,minMatchCharLength:c,isCaseSensitive:o,ignoreLocation:a},this.pattern=o?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(t,e)=>{this.chunks.push({pattern:t,alphabet:k(t),startIndex:e})},l=this.pattern.length;if(l>L){let t=0;const e=l%L,n=l-e;for(;t<n;)h(this.pattern.substr(t,L),t),t+=L;if(e){const t=l-L;h(this.pattern.substr(t),t)}}else h(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return n&&(e.indices=[[0,t.length-1]]),e}const{location:s,distance:i,threshold:r,findAllMatches:c,minMatchCharLength:o,ignoreLocation:a}=this.options;let h=[],l=0,u=!1;this.chunks.forEach((({pattern:e,alphabet:d,startIndex:g})=>{const{isMatch:f,score:m,indices:y}=function(t,e,n,{location:s=p.location,distance:i=p.distance,threshold:r=p.threshold,findAllMatches:c=p.findAllMatches,minMatchCharLength:o=p.minMatchCharLength,includeMatches:a=p.includeMatches,ignoreLocation:h=p.ignoreLocation}={}){if(e.length>L)throw new Error("Pattern length exceeds max of 32.");const l=e.length,u=t.length,d=Math.max(0,Math.min(s,u));let g=r,f=d;const m=o>1||a,y=m?Array(u):[];let M;for(;(M=t.indexOf(e,f))>-1;){let t=x(e,{currentLocation:M,expectedLocation:d,distance:i,ignoreLocation:h});if(g=Math.min(t,g),f=M+l,m){let t=0;for(;t<l;)y[M+t]=1,t+=1}}f=-1;let k=[],v=1,b=l+u;const C=1<<l-1;for(let s=0;s<l;s+=1){let r=0,o=b;for(;r<o;)x(e,{errors:s,currentLocation:d+o,expectedLocation:d,distance:i,ignoreLocation:h})<=g?r=o:b=o,o=Math.floor((b-r)/2+r);b=o;let a=Math.max(1,d-o+1),p=c?u:Math.min(d+o,u)+l,M=Array(p+2);M[p+1]=(1<<s)-1;for(let r=p;r>=a;r-=1){let c=r-1,o=n[t.charAt(c)];if(m&&(y[c]=+!!o),M[r]=(M[r+1]<<1|1)&o,s&&(M[r]|=(k[r+1]|k[r])<<1|1|k[r+1]),M[r]&C&&(v=x(e,{errors:s,currentLocation:c,expectedLocation:d,distance:i,ignoreLocation:h}),v<=g)){if(g=v,f=c,f<=d)break;a=Math.max(1,2*d-f)}}if(x(e,{errors:s+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:h})>g)break;k=M}const _={isMatch:f>=0,score:Math.max(.001,v)};if(m){const t=function(t=[],e=p.minMatchCharLength){let n=[],s=-1,i=-1,r=0;for(let c=t.length;r<c;r+=1){let c=t[r];c&&-1===s?s=r:c||-1===s||(i=r-1,i-s+1>=e&&n.push([s,i]),s=-1)}return t[r-1]&&r-s>=e&&n.push([s,r-1]),n}(y,o);t.length?a&&(_.indices=t):_.isMatch=!1}return _}(t,e,d,{location:s+g,distance:i,threshold:r,findAllMatches:c,minMatchCharLength:o,includeMatches:n,ignoreLocation:a});f&&(u=!0),l+=m,f&&y&&(h=[...h,...y])}));let d={isMatch:u,score:u?l/this.chunks.length:1};return u&&n&&(d.indices=h),d}}class b{constructor(t){this.pattern=t}static isMultiMatch(t){return C(t,this.multiRegex)}static isSingleMatch(t){return C(t,this.singleRegex)}search(){}}function C(t,e){const n=t.match(e);return n?n[1]:null}class _ extends b{constructor(t,{location:e=p.location,threshold:n=p.threshold,distance:s=p.distance,includeMatches:i=p.includeMatches,findAllMatches:r=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,isCaseSensitive:o=p.isCaseSensitive,ignoreLocation:a=p.ignoreLocation}={}){super(t),this._bitapSearch=new v(t,{location:e,threshold:n,distance:s,includeMatches:i,findAllMatches:r,minMatchCharLength:c,isCaseSensitive:o,ignoreLocation:a})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class E extends b{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,n=0;const s=[],i=this.pattern.length;for(;(e=t.indexOf(this.pattern,n))>-1;)n=e+i,s.push([e,n-1]);const r=!!s.length;return{isMatch:r,score:r?0:1,indices:s}}}const S=[class extends b{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},E,class extends b{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends b{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends b{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends b{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends b{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},_],w=S.length,I=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,A=new Set([_.type,E.type]);const $=[];function F(t,e){for(let n=0,s=$.length;n<s;n+=1){let s=$[n];if(s.condition(t,e))return new s(t,e)}return new v(t,e)}const N="$and",R="$path",O=t=>!(!t[N]&&!t.$or),j=t=>({[N]:Object.keys(t).map((e=>({[e]:t[e]})))});function W(t,e,{auto:n=!0}={}){const r=t=>{let o=Object.keys(t);const a=(t=>!!t[R])(t);if(!a&&o.length>1&&!O(t))return r(j(t));if((t=>!s(t)&&c(t)&&!O(t))(t)){const s=a?t[R]:o[0],r=a?t.$val:t[s];if(!i(r))throw new Error((t=>`Invalid value for key ${t}`)(s));const c={keyId:f(s),pattern:r};return n&&(c.searcher=F(r,e)),c}let h={children:[],operator:o[0]};return o.forEach((e=>{const n=t[e];s(n)&&n.forEach((t=>{h.children.push(r(t))}))})),h};return O(t)||(t=j(t)),r(t)}function z(t,e){const n=t.matches;e.matches=[],o(n)&&n.forEach((t=>{if(!o(t.indices)||!t.indices.length)return;const{indices:n,value:s}=t;let i={indices:n,value:s};t.key&&(i.key=t.key.src),t.idx>-1&&(i.refIndex=t.idx),e.matches.push(i)}))}function K(t,e){e.score=t.score}class P{constructor(t,e={},n){this.options={...p,...e},this.options.useExtendedSearch,this._keyStore=new u(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof y))throw new Error("Incorrect 'index' type");this._myIndex=e||M(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){o(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const e=[];for(let n=0,s=this._docs.length;n<s;n+=1){const i=this._docs[n];t(i,n)&&(this.removeAt(n),n-=1,s-=1,e.push(i))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:s,shouldSort:c,sortFn:o,ignoreFieldNorm:a}=this.options;let h=i(t)?i(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=p.ignoreFieldNorm}){t.forEach((t=>{let n=1;t.matches.forEach((({key:t,norm:s,score:i})=>{const r=t?t.weight:null;n*=Math.pow(0===i&&r?Number.EPSILON:i,(r||1)*(e?1:s))})),t.score=n}))}(h,{ignoreFieldNorm:a}),c&&h.sort(o),r(e)&&e>-1&&(h=h.slice(0,e)),function(t,e,{includeMatches:n=p.includeMatches,includeScore:s=p.includeScore}={}){const i=[];return n&&i.push(z),s&&i.push(K),t.map((t=>{const{idx:n}=t,s={item:e[n],refIndex:n};return i.length&&i.forEach((e=>{e(t,s)})),s}))}(h,this._docs,{includeMatches:n,includeScore:s})}_searchStringList(t){const e=F(t,this.options),{records:n}=this._myIndex,s=[];return n.forEach((({v:t,i:n,n:i})=>{if(!o(t))return;const{isMatch:r,score:c,indices:a}=e.searchIn(t);r&&s.push({item:t,idx:n,matches:[{score:c,value:t,norm:i,indices:a}]})})),s}_searchLogical(t){const e=W(t,this.options),n=(t,e,s)=>{if(!t.children){const{keyId:n,searcher:i}=t,r=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(e,n),searcher:i});return r&&r.length?[{idx:s,item:e,matches:r}]:[]}const i=[];for(let r=0,c=t.children.length;r<c;r+=1){const c=t.children[r],o=n(c,e,s);if(o.length)i.push(...o);else if(t.operator===N)return[]}return i},s=this._myIndex.records,i={},r=[];return s.forEach((({$:t,i:s})=>{if(o(t)){let c=n(e,t,s);c.length&&(i[s]||(i[s]={idx:s,item:t,matches:[]},r.push(i[s])),c.forEach((({matches:t})=>{i[s].matches.push(...t)})))}})),r}_searchObjectList(t){const e=F(t,this.options),{keys:n,records:s}=this._myIndex,i=[];return s.forEach((({$:t,i:s})=>{if(!o(t))return;let r=[];n.forEach(((n,s)=>{r.push(...this._findMatches({key:n,value:t[s],searcher:e}))})),r.length&&i.push({idx:s,item:t,matches:r})})),i}_findMatches({key:t,value:e,searcher:n}){if(!o(e))return[];let i=[];if(s(e))e.forEach((({v:e,i:s,n:r})=>{if(!o(e))return;const{isMatch:c,score:a,indices:h}=n.searchIn(e);c&&i.push({score:a,key:t,value:e,idx:s,norm:r,indices:h})}));else{const{v:s,n:r}=e,{isMatch:c,score:o,indices:a}=n.searchIn(s);c&&i.push({score:o,key:t,value:s,norm:r,indices:a})}return i}}P.version="7.0.0",P.createIndex=M,P.parseIndex=function(t,{getFn:e=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){const{keys:s,records:i}=t,r=new y({getFn:e,fieldNormWeight:n});return r.setKeys(s),r.setIndexRecords(i),r},P.config=p,P.parseQuery=W,function(...t){$.push(...t)}(class{constructor(t,{isCaseSensitive:e=p.isCaseSensitive,includeMatches:n=p.includeMatches,minMatchCharLength:s=p.minMatchCharLength,ignoreLocation:i=p.ignoreLocation,findAllMatches:r=p.findAllMatches,location:c=p.location,threshold:o=p.threshold,distance:a=p.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:s,findAllMatches:r,ignoreLocation:i,location:c,threshold:o,distance:a},this.pattern=e?t:t.toLowerCase(),this.query=function(t,e={}){return t.split("|").map((t=>{let n=t.trim().split(I).filter((t=>t&&!!t.trim())),s=[];for(let t=0,i=n.length;t<i;t+=1){const i=n[t];let r=!1,c=-1;for(;!r&&++c<w;){const t=S[c];let n=t.isMultiMatch(i);n&&(s.push(new t(n,e)),r=!0)}if(!r)for(c=-1;++c<w;){const t=S[c];let n=t.isSingleMatch(i);if(n){s.push(new t(n,e));break}}}return s}))}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let i=0,r=[],c=0;for(let s=0,o=e.length;s<o;s+=1){const o=e[s];r.length=0,i=0;for(let e=0,s=o.length;e<s;e+=1){const s=o[e],{isMatch:a,indices:h,score:l}=s.search(t);if(!a){c=0,i=0,r.length=0;break}if(i+=1,c+=l,n){const t=s.constructor.type;A.has(t)?r=[...r,...h]:r.push(h)}}if(i){let t={isMatch:!0,score:c/i};return n&&(t.indices=r),t}}return{isMatch:!1,score:1}}}),t.appendChild(e),t.appendChild(n);const q={keys:["title","url"]};let J;function T(){n.value,chrome.runtime.sendMessage({action:"getTabs"},(s=>{s?function(s){e.innerHTML="";const i=n.value.trim(),r=new P(s,q),c=""===i?s:r.search(i).map((t=>t.item));c.reverse(),c.forEach(((n,s,i)=>{const r=document.createElement("li");r.classList.add("fuzzy-tab-search-tab-list-item");const c=new URL(n.url).hostname;r.textContent=c+" : "+n.title,s===i.length-1&&(J=r,J.style.backgroundColor="gray"),r.addEventListener("click",(()=>{chrome.runtime.sendMessage({action:"highlightTab",tabIndex:n.index}),document.body.removeChild(t)})),e.appendChild(r)}))}(s):console.error("Failed to fetch tabs.")}))}document.addEventListener("keydown",(function(e){e.ctrlKey&&"f"===e.key&&(n.value="",T(),e.preventDefault(),document.body.appendChild(t),n.focus(),console.log("test"))})),t.addEventListener("keydown",(function(e){"Escape"===e.key&&document.body.removeChild(t)})),n.addEventListener("input",T),n.addEventListener("keydown",(function(t){"Enter"===t.key?J.click():t.ctrlKey&&"p"===t.key?J.previousElementSibling&&(J.style.backgroundColor="",J=J.previousElementSibling,J.style.backgroundColor="gray"):t.ctrlKey&&"n"===t.key&&J.nextElementSibling&&(J.style.backgroundColor="",J=J.nextElementSibling,J.style.backgroundColor="gray")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU8sRUFBTytSLGlCQUFpQixRQUFTcEIsR0FFakMzUSxFQUFPK1IsaUJBQWlCLFdBQVcsU0FBVU0sR0FDekIsVUFBZEEsRUFBTXpRLElBQ1I4TyxFQUFhZ0MsUUFDSkwsRUFBTUMsU0FBeUIsTUFBZEQsRUFBTXpRLElBQzVCOE8sRUFBYWlDLHlCQUNmakMsRUFBYW1CLE1BQU1DLGdCQUFrQixHQUNyQ3BCLEVBQWVBLEVBQWFpQyx1QkFDNUJqQyxFQUFhbUIsTUFBTUMsZ0JBQWtCLFFBRTlCTyxFQUFNQyxTQUF5QixNQUFkRCxFQUFNelEsS0FFNUI4TyxFQUFha0MscUJBQ2ZsQyxFQUFhbUIsTUFBTUMsZ0JBQWtCLEdBQ3JDcEIsRUFBZUEsRUFBYWtDLG1CQUM1QmxDLEVBQWFtQixNQUFNQyxnQkFBa0IsT0FHM0MsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2Z1enp5LXRhYi1zZWFyY2gvLi9zcmMvZWxlbWVudHMuanMiLCJ3ZWJwYWNrOi8vZnV6enktdGFiLXNlYXJjaC8uL25vZGVfbW9kdWxlcy9mdXNlLmpzL2Rpc3QvZnVzZS5tanMiLCJ3ZWJwYWNrOi8vZnV6enktdGFiLXNlYXJjaC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtYWluRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbm1haW5EaXYuY2xhc3NMaXN0LmFkZChcImZ1enp5LXRhYi1zZWFyY2gtcGFyZW50XCIpO1xubWFpbkRpdi50YWJJbmRleCA9IDA7XG5cbmNvbnN0IHRhYkxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XG50YWJMaXN0LmNsYXNzTGlzdC5hZGQoXCJmdXp6eS10YWItc2VhcmNoLXRhYi1saXN0XCIpO1xuXG5jb25zdCBzZWFyY2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5zZWFyY2guY2xhc3NMaXN0LmFkZChcImZ1enp5LXRhYi1zZWFyY2gtc2VhcmNoLWJveFwiKTtcbnNlYXJjaC5hdXRvZm9jdXMgPSB0cnVlO1xuXG5leHBvcnQgeyBtYWluRGl2LCB0YWJMaXN0LCBzZWFyY2ggfTtcbiIsIi8qKlxuICogRnVzZS5qcyB2Ny4wLjAgLSBMaWdodHdlaWdodCBmdXp6eS1zZWFyY2ggKGh0dHA6Ly9mdXNlanMuaW8pXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDIzIEtpcm8gUmlzayAoaHR0cDovL2tpcm8ubWUpXG4gKiBBbGwgUmlnaHRzIFJlc2VydmVkLiBBcGFjaGUgU29mdHdhcmUgTGljZW5zZSAyLjBcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqL1xuXG5mdW5jdGlvbiBpc0FycmF5KHZhbHVlKSB7XG4gIHJldHVybiAhQXJyYXkuaXNBcnJheVxuICAgID8gZ2V0VGFnKHZhbHVlKSA9PT0gJ1tvYmplY3QgQXJyYXldJ1xuICAgIDogQXJyYXkuaXNBcnJheSh2YWx1ZSlcbn1cblxuLy8gQWRhcHRlZCBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vbG9kYXNoL2xvZGFzaC9ibG9iL21hc3Rlci8uaW50ZXJuYWwvYmFzZVRvU3RyaW5nLmpzXG5jb25zdCBJTkZJTklUWSA9IDEgLyAwO1xuZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG4gIC8vIEV4aXQgZWFybHkgZm9yIHN0cmluZ3MgdG8gYXZvaWQgYSBwZXJmb3JtYW5jZSBoaXQgaW4gc29tZSBlbnZpcm9ubWVudHMuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuICBsZXQgcmVzdWx0ID0gdmFsdWUgKyAnJztcbiAgcmV0dXJuIHJlc3VsdCA9PSAnMCcgJiYgMSAvIHZhbHVlID09IC1JTkZJTklUWSA/ICctMCcgOiByZXN1bHRcbn1cblxuZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IGJhc2VUb1N0cmluZyh2YWx1ZSlcbn1cblxuZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZydcbn1cblxuZnVuY3Rpb24gaXNOdW1iZXIodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcidcbn1cblxuLy8gQWRhcHRlZCBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vbG9kYXNoL2xvZGFzaC9ibG9iL21hc3Rlci9pc0Jvb2xlYW4uanNcbmZ1bmN0aW9uIGlzQm9vbGVhbih2YWx1ZSkge1xuICByZXR1cm4gKFxuICAgIHZhbHVlID09PSB0cnVlIHx8XG4gICAgdmFsdWUgPT09IGZhbHNlIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgZ2V0VGFnKHZhbHVlKSA9PSAnW29iamVjdCBCb29sZWFuXScpXG4gIClcbn1cblxuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCdcbn1cblxuLy8gQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KHZhbHVlKSAmJiB2YWx1ZSAhPT0gbnVsbFxufVxuXG5mdW5jdGlvbiBpc0RlZmluZWQodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGxcbn1cblxuZnVuY3Rpb24gaXNCbGFuayh2YWx1ZSkge1xuICByZXR1cm4gIXZhbHVlLnRyaW0oKS5sZW5ndGhcbn1cblxuLy8gR2V0cyB0aGUgYHRvU3RyaW5nVGFnYCBvZiBgdmFsdWVgLlxuLy8gQWRhcHRlZCBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vbG9kYXNoL2xvZGFzaC9ibG9iL21hc3Rlci8uaW50ZXJuYWwvZ2V0VGFnLmpzXG5mdW5jdGlvbiBnZXRUYWcodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGxcbiAgICA/IHZhbHVlID09PSB1bmRlZmluZWRcbiAgICAgID8gJ1tvYmplY3QgVW5kZWZpbmVkXSdcbiAgICAgIDogJ1tvYmplY3QgTnVsbF0nXG4gICAgOiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpXG59XG5cbmNvbnN0IEVYVEVOREVEX1NFQVJDSF9VTkFWQUlMQUJMRSA9ICdFeHRlbmRlZCBzZWFyY2ggaXMgbm90IGF2YWlsYWJsZSc7XG5cbmNvbnN0IElOQ09SUkVDVF9JTkRFWF9UWVBFID0gXCJJbmNvcnJlY3QgJ2luZGV4JyB0eXBlXCI7XG5cbmNvbnN0IExPR0lDQUxfU0VBUkNIX0lOVkFMSURfUVVFUllfRk9SX0tFWSA9IChrZXkpID0+XG4gIGBJbnZhbGlkIHZhbHVlIGZvciBrZXkgJHtrZXl9YDtcblxuY29uc3QgUEFUVEVSTl9MRU5HVEhfVE9PX0xBUkdFID0gKG1heCkgPT5cbiAgYFBhdHRlcm4gbGVuZ3RoIGV4Y2VlZHMgbWF4IG9mICR7bWF4fS5gO1xuXG5jb25zdCBNSVNTSU5HX0tFWV9QUk9QRVJUWSA9IChuYW1lKSA9PiBgTWlzc2luZyAke25hbWV9IHByb3BlcnR5IGluIGtleWA7XG5cbmNvbnN0IElOVkFMSURfS0VZX1dFSUdIVF9WQUxVRSA9IChrZXkpID0+XG4gIGBQcm9wZXJ0eSAnd2VpZ2h0JyBpbiBrZXkgJyR7a2V5fScgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXJgO1xuXG5jb25zdCBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5jbGFzcyBLZXlTdG9yZSB7XG4gIGNvbnN0cnVjdG9yKGtleXMpIHtcbiAgICB0aGlzLl9rZXlzID0gW107XG4gICAgdGhpcy5fa2V5TWFwID0ge307XG5cbiAgICBsZXQgdG90YWxXZWlnaHQgPSAwO1xuXG4gICAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGxldCBvYmogPSBjcmVhdGVLZXkoa2V5KTtcblxuICAgICAgdGhpcy5fa2V5cy5wdXNoKG9iaik7XG4gICAgICB0aGlzLl9rZXlNYXBbb2JqLmlkXSA9IG9iajtcblxuICAgICAgdG90YWxXZWlnaHQgKz0gb2JqLndlaWdodDtcbiAgICB9KTtcblxuICAgIC8vIE5vcm1hbGl6ZSB3ZWlnaHRzIHNvIHRoYXQgdGhlaXIgc3VtIGlzIGVxdWFsIHRvIDFcbiAgICB0aGlzLl9rZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAga2V5LndlaWdodCAvPSB0b3RhbFdlaWdodDtcbiAgICB9KTtcbiAgfVxuICBnZXQoa2V5SWQpIHtcbiAgICByZXR1cm4gdGhpcy5fa2V5TWFwW2tleUlkXVxuICB9XG4gIGtleXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2tleXNcbiAgfVxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuX2tleXMpXG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlS2V5KGtleSkge1xuICBsZXQgcGF0aCA9IG51bGw7XG4gIGxldCBpZCA9IG51bGw7XG4gIGxldCBzcmMgPSBudWxsO1xuICBsZXQgd2VpZ2h0ID0gMTtcbiAgbGV0IGdldEZuID0gbnVsbDtcblxuICBpZiAoaXNTdHJpbmcoa2V5KSB8fCBpc0FycmF5KGtleSkpIHtcbiAgICBzcmMgPSBrZXk7XG4gICAgcGF0aCA9IGNyZWF0ZUtleVBhdGgoa2V5KTtcbiAgICBpZCA9IGNyZWF0ZUtleUlkKGtleSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFoYXNPd24uY2FsbChrZXksICduYW1lJykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihNSVNTSU5HX0tFWV9QUk9QRVJUWSgnbmFtZScpKVxuICAgIH1cblxuICAgIGNvbnN0IG5hbWUgPSBrZXkubmFtZTtcbiAgICBzcmMgPSBuYW1lO1xuXG4gICAgaWYgKGhhc093bi5jYWxsKGtleSwgJ3dlaWdodCcpKSB7XG4gICAgICB3ZWlnaHQgPSBrZXkud2VpZ2h0O1xuXG4gICAgICBpZiAod2VpZ2h0IDw9IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfS0VZX1dFSUdIVF9WQUxVRShuYW1lKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYXRoID0gY3JlYXRlS2V5UGF0aChuYW1lKTtcbiAgICBpZCA9IGNyZWF0ZUtleUlkKG5hbWUpO1xuICAgIGdldEZuID0ga2V5LmdldEZuO1xuICB9XG5cbiAgcmV0dXJuIHsgcGF0aCwgaWQsIHdlaWdodCwgc3JjLCBnZXRGbiB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUtleVBhdGgoa2V5KSB7XG4gIHJldHVybiBpc0FycmF5KGtleSkgPyBrZXkgOiBrZXkuc3BsaXQoJy4nKVxufVxuXG5mdW5jdGlvbiBjcmVhdGVLZXlJZChrZXkpIHtcbiAgcmV0dXJuIGlzQXJyYXkoa2V5KSA/IGtleS5qb2luKCcuJykgOiBrZXlcbn1cblxuZnVuY3Rpb24gZ2V0KG9iaiwgcGF0aCkge1xuICBsZXQgbGlzdCA9IFtdO1xuICBsZXQgYXJyID0gZmFsc2U7XG5cbiAgY29uc3QgZGVlcEdldCA9IChvYmosIHBhdGgsIGluZGV4KSA9PiB7XG4gICAgaWYgKCFpc0RlZmluZWQob2JqKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICghcGF0aFtpbmRleF0pIHtcbiAgICAgIC8vIElmIHRoZXJlJ3Mgbm8gcGF0aCBsZWZ0LCB3ZSd2ZSBhcnJpdmVkIGF0IHRoZSBvYmplY3Qgd2UgY2FyZSBhYm91dC5cbiAgICAgIGxpc3QucHVzaChvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQga2V5ID0gcGF0aFtpbmRleF07XG5cbiAgICAgIGNvbnN0IHZhbHVlID0gb2JqW2tleV07XG5cbiAgICAgIGlmICghaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UncmUgYXQgdGhlIGxhc3QgdmFsdWUgaW4gdGhlIHBhdGgsIGFuZCBpZiBpdCdzIGEgc3RyaW5nL251bWJlci9ib29sLFxuICAgICAgLy8gYWRkIGl0IHRvIHRoZSBsaXN0XG4gICAgICBpZiAoXG4gICAgICAgIGluZGV4ID09PSBwYXRoLmxlbmd0aCAtIDEgJiZcbiAgICAgICAgKGlzU3RyaW5nKHZhbHVlKSB8fCBpc051bWJlcih2YWx1ZSkgfHwgaXNCb29sZWFuKHZhbHVlKSlcbiAgICAgICkge1xuICAgICAgICBsaXN0LnB1c2godG9TdHJpbmcodmFsdWUpKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgYXJyID0gdHJ1ZTtcbiAgICAgICAgLy8gU2VhcmNoIGVhY2ggaXRlbSBpbiB0aGUgYXJyYXkuXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB2YWx1ZS5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICAgIGRlZXBHZXQodmFsdWVbaV0sIHBhdGgsIGluZGV4ICsgMSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocGF0aC5sZW5ndGgpIHtcbiAgICAgICAgLy8gQW4gb2JqZWN0LiBSZWN1cnNlIGZ1cnRoZXIuXG4gICAgICAgIGRlZXBHZXQodmFsdWUsIHBhdGgsIGluZGV4ICsgMSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IChzaW5jZSBwYXRoIHVzZWQgdG8gYmUgYSBzdHJpbmcpXG4gIGRlZXBHZXQob2JqLCBpc1N0cmluZyhwYXRoKSA/IHBhdGguc3BsaXQoJy4nKSA6IHBhdGgsIDApO1xuXG4gIHJldHVybiBhcnIgPyBsaXN0IDogbGlzdFswXVxufVxuXG5jb25zdCBNYXRjaE9wdGlvbnMgPSB7XG4gIC8vIFdoZXRoZXIgdGhlIG1hdGNoZXMgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSByZXN1bHQgc2V0LiBXaGVuIGB0cnVlYCwgZWFjaCByZWNvcmQgaW4gdGhlIHJlc3VsdFxuICAvLyBzZXQgd2lsbCBpbmNsdWRlIHRoZSBpbmRpY2VzIG9mIHRoZSBtYXRjaGVkIGNoYXJhY3RlcnMuXG4gIC8vIFRoZXNlIGNhbiBjb25zZXF1ZW50bHkgYmUgdXNlZCBmb3IgaGlnaGxpZ2h0aW5nIHB1cnBvc2VzLlxuICBpbmNsdWRlTWF0Y2hlczogZmFsc2UsXG4gIC8vIFdoZW4gYHRydWVgLCB0aGUgbWF0Y2hpbmcgZnVuY3Rpb24gd2lsbCBjb250aW51ZSB0byB0aGUgZW5kIG9mIGEgc2VhcmNoIHBhdHRlcm4gZXZlbiBpZlxuICAvLyBhIHBlcmZlY3QgbWF0Y2ggaGFzIGFscmVhZHkgYmVlbiBsb2NhdGVkIGluIHRoZSBzdHJpbmcuXG4gIGZpbmRBbGxNYXRjaGVzOiBmYWxzZSxcbiAgLy8gTWluaW11bSBudW1iZXIgb2YgY2hhcmFjdGVycyB0aGF0IG11c3QgYmUgbWF0Y2hlZCBiZWZvcmUgYSByZXN1bHQgaXMgY29uc2lkZXJlZCBhIG1hdGNoXG4gIG1pbk1hdGNoQ2hhckxlbmd0aDogMVxufTtcblxuY29uc3QgQmFzaWNPcHRpb25zID0ge1xuICAvLyBXaGVuIGB0cnVlYCwgdGhlIGFsZ29yaXRobSBjb250aW51ZXMgc2VhcmNoaW5nIHRvIHRoZSBlbmQgb2YgdGhlIGlucHV0IGV2ZW4gaWYgYSBwZXJmZWN0XG4gIC8vIG1hdGNoIGlzIGZvdW5kIGJlZm9yZSB0aGUgZW5kIG9mIHRoZSBzYW1lIGlucHV0LlxuICBpc0Nhc2VTZW5zaXRpdmU6IGZhbHNlLFxuICAvLyBXaGVuIHRydWUsIHRoZSBtYXRjaGluZyBmdW5jdGlvbiB3aWxsIGNvbnRpbnVlIHRvIHRoZSBlbmQgb2YgYSBzZWFyY2ggcGF0dGVybiBldmVuIGlmXG4gIGluY2x1ZGVTY29yZTogZmFsc2UsXG4gIC8vIExpc3Qgb2YgcHJvcGVydGllcyB0aGF0IHdpbGwgYmUgc2VhcmNoZWQuIFRoaXMgYWxzbyBzdXBwb3J0cyBuZXN0ZWQgcHJvcGVydGllcy5cbiAga2V5czogW10sXG4gIC8vIFdoZXRoZXIgdG8gc29ydCB0aGUgcmVzdWx0IGxpc3QsIGJ5IHNjb3JlXG4gIHNob3VsZFNvcnQ6IHRydWUsXG4gIC8vIERlZmF1bHQgc29ydCBmdW5jdGlvbjogc29ydCBieSBhc2NlbmRpbmcgc2NvcmUsIGFzY2VuZGluZyBpbmRleFxuICBzb3J0Rm46IChhLCBiKSA9PlxuICAgIGEuc2NvcmUgPT09IGIuc2NvcmUgPyAoYS5pZHggPCBiLmlkeCA/IC0xIDogMSkgOiBhLnNjb3JlIDwgYi5zY29yZSA/IC0xIDogMVxufTtcblxuY29uc3QgRnV6enlPcHRpb25zID0ge1xuICAvLyBBcHByb3hpbWF0ZWx5IHdoZXJlIGluIHRoZSB0ZXh0IGlzIHRoZSBwYXR0ZXJuIGV4cGVjdGVkIHRvIGJlIGZvdW5kP1xuICBsb2NhdGlvbjogMCxcbiAgLy8gQXQgd2hhdCBwb2ludCBkb2VzIHRoZSBtYXRjaCBhbGdvcml0aG0gZ2l2ZSB1cC4gQSB0aHJlc2hvbGQgb2YgJzAuMCcgcmVxdWlyZXMgYSBwZXJmZWN0IG1hdGNoXG4gIC8vIChvZiBib3RoIGxldHRlcnMgYW5kIGxvY2F0aW9uKSwgYSB0aHJlc2hvbGQgb2YgJzEuMCcgd291bGQgbWF0Y2ggYW55dGhpbmcuXG4gIHRocmVzaG9sZDogMC42LFxuICAvLyBEZXRlcm1pbmVzIGhvdyBjbG9zZSB0aGUgbWF0Y2ggbXVzdCBiZSB0byB0aGUgZnV6enkgbG9jYXRpb24gKHNwZWNpZmllZCBhYm92ZSkuXG4gIC8vIEFuIGV4YWN0IGxldHRlciBtYXRjaCB3aGljaCBpcyAnZGlzdGFuY2UnIGNoYXJhY3RlcnMgYXdheSBmcm9tIHRoZSBmdXp6eSBsb2NhdGlvblxuICAvLyB3b3VsZCBzY29yZSBhcyBhIGNvbXBsZXRlIG1pc21hdGNoLiBBIGRpc3RhbmNlIG9mICcwJyByZXF1aXJlcyB0aGUgbWF0Y2ggYmUgYXRcbiAgLy8gdGhlIGV4YWN0IGxvY2F0aW9uIHNwZWNpZmllZCwgYSB0aHJlc2hvbGQgb2YgJzEwMDAnIHdvdWxkIHJlcXVpcmUgYSBwZXJmZWN0IG1hdGNoXG4gIC8vIHRvIGJlIHdpdGhpbiA4MDAgY2hhcmFjdGVycyBvZiB0aGUgZnV6enkgbG9jYXRpb24gdG8gYmUgZm91bmQgdXNpbmcgYSAwLjggdGhyZXNob2xkLlxuICBkaXN0YW5jZTogMTAwXG59O1xuXG5jb25zdCBBZHZhbmNlZE9wdGlvbnMgPSB7XG4gIC8vIFdoZW4gYHRydWVgLCBpdCBlbmFibGVzIHRoZSB1c2Ugb2YgdW5peC1saWtlIHNlYXJjaCBjb21tYW5kc1xuICB1c2VFeHRlbmRlZFNlYXJjaDogZmFsc2UsXG4gIC8vIFRoZSBnZXQgZnVuY3Rpb24gdG8gdXNlIHdoZW4gZmV0Y2hpbmcgYW4gb2JqZWN0J3MgcHJvcGVydGllcy5cbiAgLy8gVGhlIGRlZmF1bHQgd2lsbCBzZWFyY2ggbmVzdGVkIHBhdGhzICppZSBmb28uYmFyLmJheipcbiAgZ2V0Rm46IGdldCxcbiAgLy8gV2hlbiBgdHJ1ZWAsIHNlYXJjaCB3aWxsIGlnbm9yZSBgbG9jYXRpb25gIGFuZCBgZGlzdGFuY2VgLCBzbyBpdCB3b24ndCBtYXR0ZXJcbiAgLy8gd2hlcmUgaW4gdGhlIHN0cmluZyB0aGUgcGF0dGVybiBhcHBlYXJzLlxuICAvLyBNb3JlIGluZm86IGh0dHBzOi8vZnVzZWpzLmlvL2NvbmNlcHRzL3Njb3JpbmctdGhlb3J5Lmh0bWwjZnV6emluZXNzLXNjb3JlXG4gIGlnbm9yZUxvY2F0aW9uOiBmYWxzZSxcbiAgLy8gV2hlbiBgdHJ1ZWAsIHRoZSBjYWxjdWxhdGlvbiBmb3IgdGhlIHJlbGV2YW5jZSBzY29yZSAodXNlZCBmb3Igc29ydGluZykgd2lsbFxuICAvLyBpZ25vcmUgdGhlIGZpZWxkLWxlbmd0aCBub3JtLlxuICAvLyBNb3JlIGluZm86IGh0dHBzOi8vZnVzZWpzLmlvL2NvbmNlcHRzL3Njb3JpbmctdGhlb3J5Lmh0bWwjZmllbGQtbGVuZ3RoLW5vcm1cbiAgaWdub3JlRmllbGROb3JtOiBmYWxzZSxcbiAgLy8gVGhlIHdlaWdodCB0byBkZXRlcm1pbmUgaG93IG11Y2ggZmllbGQgbGVuZ3RoIG5vcm0gZWZmZWN0cyBzY29yaW5nLlxuICBmaWVsZE5vcm1XZWlnaHQ6IDFcbn07XG5cbnZhciBDb25maWcgPSB7XG4gIC4uLkJhc2ljT3B0aW9ucyxcbiAgLi4uTWF0Y2hPcHRpb25zLFxuICAuLi5GdXp6eU9wdGlvbnMsXG4gIC4uLkFkdmFuY2VkT3B0aW9uc1xufTtcblxuY29uc3QgU1BBQ0UgPSAvW14gXSsvZztcblxuLy8gRmllbGQtbGVuZ3RoIG5vcm06IHRoZSBzaG9ydGVyIHRoZSBmaWVsZCwgdGhlIGhpZ2hlciB0aGUgd2VpZ2h0LlxuLy8gU2V0IHRvIDMgZGVjaW1hbHMgdG8gcmVkdWNlIGluZGV4IHNpemUuXG5mdW5jdGlvbiBub3JtKHdlaWdodCA9IDEsIG1hbnRpc3NhID0gMykge1xuICBjb25zdCBjYWNoZSA9IG5ldyBNYXAoKTtcbiAgY29uc3QgbSA9IE1hdGgucG93KDEwLCBtYW50aXNzYSk7XG5cbiAgcmV0dXJuIHtcbiAgICBnZXQodmFsdWUpIHtcbiAgICAgIGNvbnN0IG51bVRva2VucyA9IHZhbHVlLm1hdGNoKFNQQUNFKS5sZW5ndGg7XG5cbiAgICAgIGlmIChjYWNoZS5oYXMobnVtVG9rZW5zKSkge1xuICAgICAgICByZXR1cm4gY2FjaGUuZ2V0KG51bVRva2VucylcbiAgICAgIH1cblxuICAgICAgLy8gRGVmYXVsdCBmdW5jdGlvbiBpcyAxL3NxcnQoeCksIHdlaWdodCBtYWtlcyB0aGF0IHZhcmlhYmxlXG4gICAgICBjb25zdCBub3JtID0gMSAvIE1hdGgucG93KG51bVRva2VucywgMC41ICogd2VpZ2h0KTtcblxuICAgICAgLy8gSW4gcGxhY2Ugb2YgYHRvRml4ZWQobWFudGlzc2EpYCwgZm9yIGZhc3RlciBjb21wdXRhdGlvblxuICAgICAgY29uc3QgbiA9IHBhcnNlRmxvYXQoTWF0aC5yb3VuZChub3JtICogbSkgLyBtKTtcblxuICAgICAgY2FjaGUuc2V0KG51bVRva2Vucywgbik7XG5cbiAgICAgIHJldHVybiBuXG4gICAgfSxcbiAgICBjbGVhcigpIHtcbiAgICAgIGNhY2hlLmNsZWFyKCk7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIEZ1c2VJbmRleCB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBnZXRGbiA9IENvbmZpZy5nZXRGbixcbiAgICBmaWVsZE5vcm1XZWlnaHQgPSBDb25maWcuZmllbGROb3JtV2VpZ2h0XG4gIH0gPSB7fSkge1xuICAgIHRoaXMubm9ybSA9IG5vcm0oZmllbGROb3JtV2VpZ2h0LCAzKTtcbiAgICB0aGlzLmdldEZuID0gZ2V0Rm47XG4gICAgdGhpcy5pc0NyZWF0ZWQgPSBmYWxzZTtcblxuICAgIHRoaXMuc2V0SW5kZXhSZWNvcmRzKCk7XG4gIH1cbiAgc2V0U291cmNlcyhkb2NzID0gW10pIHtcbiAgICB0aGlzLmRvY3MgPSBkb2NzO1xuICB9XG4gIHNldEluZGV4UmVjb3JkcyhyZWNvcmRzID0gW10pIHtcbiAgICB0aGlzLnJlY29yZHMgPSByZWNvcmRzO1xuICB9XG4gIHNldEtleXMoa2V5cyA9IFtdKSB7XG4gICAgdGhpcy5rZXlzID0ga2V5cztcbiAgICB0aGlzLl9rZXlzTWFwID0ge307XG4gICAga2V5cy5mb3JFYWNoKChrZXksIGlkeCkgPT4ge1xuICAgICAgdGhpcy5fa2V5c01hcFtrZXkuaWRdID0gaWR4O1xuICAgIH0pO1xuICB9XG4gIGNyZWF0ZSgpIHtcbiAgICBpZiAodGhpcy5pc0NyZWF0ZWQgfHwgIXRoaXMuZG9jcy5sZW5ndGgpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuaXNDcmVhdGVkID0gdHJ1ZTtcblxuICAgIC8vIExpc3QgaXMgQXJyYXk8U3RyaW5nPlxuICAgIGlmIChpc1N0cmluZyh0aGlzLmRvY3NbMF0pKSB7XG4gICAgICB0aGlzLmRvY3MuZm9yRWFjaCgoZG9jLCBkb2NJbmRleCkgPT4ge1xuICAgICAgICB0aGlzLl9hZGRTdHJpbmcoZG9jLCBkb2NJbmRleCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTGlzdCBpcyBBcnJheTxPYmplY3Q+XG4gICAgICB0aGlzLmRvY3MuZm9yRWFjaCgoZG9jLCBkb2NJbmRleCkgPT4ge1xuICAgICAgICB0aGlzLl9hZGRPYmplY3QoZG9jLCBkb2NJbmRleCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLm5vcm0uY2xlYXIoKTtcbiAgfVxuICAvLyBBZGRzIGEgZG9jIHRvIHRoZSBlbmQgb2YgdGhlIGluZGV4XG4gIGFkZChkb2MpIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLnNpemUoKTtcblxuICAgIGlmIChpc1N0cmluZyhkb2MpKSB7XG4gICAgICB0aGlzLl9hZGRTdHJpbmcoZG9jLCBpZHgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9hZGRPYmplY3QoZG9jLCBpZHgpO1xuICAgIH1cbiAgfVxuICAvLyBSZW1vdmVzIHRoZSBkb2MgYXQgdGhlIHNwZWNpZmllZCBpbmRleCBvZiB0aGUgaW5kZXhcbiAgcmVtb3ZlQXQoaWR4KSB7XG4gICAgdGhpcy5yZWNvcmRzLnNwbGljZShpZHgsIDEpO1xuXG4gICAgLy8gQ2hhbmdlIHJlZiBpbmRleCBvZiBldmVyeSBzdWJzcXVlbnQgZG9jXG4gICAgZm9yIChsZXQgaSA9IGlkeCwgbGVuID0gdGhpcy5zaXplKCk7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgdGhpcy5yZWNvcmRzW2ldLmkgLT0gMTtcbiAgICB9XG4gIH1cbiAgZ2V0VmFsdWVGb3JJdGVtQXRLZXlJZChpdGVtLCBrZXlJZCkge1xuICAgIHJldHVybiBpdGVtW3RoaXMuX2tleXNNYXBba2V5SWRdXVxuICB9XG4gIHNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVjb3Jkcy5sZW5ndGhcbiAgfVxuICBfYWRkU3RyaW5nKGRvYywgZG9jSW5kZXgpIHtcbiAgICBpZiAoIWlzRGVmaW5lZChkb2MpIHx8IGlzQmxhbmsoZG9jKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgbGV0IHJlY29yZCA9IHtcbiAgICAgIHY6IGRvYyxcbiAgICAgIGk6IGRvY0luZGV4LFxuICAgICAgbjogdGhpcy5ub3JtLmdldChkb2MpXG4gICAgfTtcblxuICAgIHRoaXMucmVjb3Jkcy5wdXNoKHJlY29yZCk7XG4gIH1cbiAgX2FkZE9iamVjdChkb2MsIGRvY0luZGV4KSB7XG4gICAgbGV0IHJlY29yZCA9IHsgaTogZG9jSW5kZXgsICQ6IHt9IH07XG5cbiAgICAvLyBJdGVyYXRlIG92ZXIgZXZlcnkga2V5IChpLmUsIHBhdGgpLCBhbmQgZmV0Y2ggdGhlIHZhbHVlIGF0IHRoYXQga2V5XG4gICAgdGhpcy5rZXlzLmZvckVhY2goKGtleSwga2V5SW5kZXgpID0+IHtcbiAgICAgIGxldCB2YWx1ZSA9IGtleS5nZXRGbiA/IGtleS5nZXRGbihkb2MpIDogdGhpcy5nZXRGbihkb2MsIGtleS5wYXRoKTtcblxuICAgICAgaWYgKCFpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgbGV0IHN1YlJlY29yZHMgPSBbXTtcbiAgICAgICAgY29uc3Qgc3RhY2sgPSBbeyBuZXN0ZWRBcnJJbmRleDogLTEsIHZhbHVlIH1dO1xuXG4gICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCB7IG5lc3RlZEFyckluZGV4LCB2YWx1ZSB9ID0gc3RhY2sucG9wKCk7XG5cbiAgICAgICAgICBpZiAoIWlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGlzU3RyaW5nKHZhbHVlKSAmJiAhaXNCbGFuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGxldCBzdWJSZWNvcmQgPSB7XG4gICAgICAgICAgICAgIHY6IHZhbHVlLFxuICAgICAgICAgICAgICBpOiBuZXN0ZWRBcnJJbmRleCxcbiAgICAgICAgICAgICAgbjogdGhpcy5ub3JtLmdldCh2YWx1ZSlcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHN1YlJlY29yZHMucHVzaChzdWJSZWNvcmQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2goKGl0ZW0sIGspID0+IHtcbiAgICAgICAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgICAgICAgbmVzdGVkQXJySW5kZXg6IGssXG4gICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2UgO1xuICAgICAgICB9XG4gICAgICAgIHJlY29yZC4kW2tleUluZGV4XSA9IHN1YlJlY29yZHM7XG4gICAgICB9IGVsc2UgaWYgKGlzU3RyaW5nKHZhbHVlKSAmJiAhaXNCbGFuayh2YWx1ZSkpIHtcbiAgICAgICAgbGV0IHN1YlJlY29yZCA9IHtcbiAgICAgICAgICB2OiB2YWx1ZSxcbiAgICAgICAgICBuOiB0aGlzLm5vcm0uZ2V0KHZhbHVlKVxuICAgICAgICB9O1xuXG4gICAgICAgIHJlY29yZC4kW2tleUluZGV4XSA9IHN1YlJlY29yZDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMucmVjb3Jkcy5wdXNoKHJlY29yZCk7XG4gIH1cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBrZXlzOiB0aGlzLmtleXMsXG4gICAgICByZWNvcmRzOiB0aGlzLnJlY29yZHNcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlSW5kZXgoXG4gIGtleXMsXG4gIGRvY3MsXG4gIHsgZ2V0Rm4gPSBDb25maWcuZ2V0Rm4sIGZpZWxkTm9ybVdlaWdodCA9IENvbmZpZy5maWVsZE5vcm1XZWlnaHQgfSA9IHt9XG4pIHtcbiAgY29uc3QgbXlJbmRleCA9IG5ldyBGdXNlSW5kZXgoeyBnZXRGbiwgZmllbGROb3JtV2VpZ2h0IH0pO1xuICBteUluZGV4LnNldEtleXMoa2V5cy5tYXAoY3JlYXRlS2V5KSk7XG4gIG15SW5kZXguc2V0U291cmNlcyhkb2NzKTtcbiAgbXlJbmRleC5jcmVhdGUoKTtcbiAgcmV0dXJuIG15SW5kZXhcbn1cblxuZnVuY3Rpb24gcGFyc2VJbmRleChcbiAgZGF0YSxcbiAgeyBnZXRGbiA9IENvbmZpZy5nZXRGbiwgZmllbGROb3JtV2VpZ2h0ID0gQ29uZmlnLmZpZWxkTm9ybVdlaWdodCB9ID0ge31cbikge1xuICBjb25zdCB7IGtleXMsIHJlY29yZHMgfSA9IGRhdGE7XG4gIGNvbnN0IG15SW5kZXggPSBuZXcgRnVzZUluZGV4KHsgZ2V0Rm4sIGZpZWxkTm9ybVdlaWdodCB9KTtcbiAgbXlJbmRleC5zZXRLZXlzKGtleXMpO1xuICBteUluZGV4LnNldEluZGV4UmVjb3JkcyhyZWNvcmRzKTtcbiAgcmV0dXJuIG15SW5kZXhcbn1cblxuZnVuY3Rpb24gY29tcHV0ZVNjb3JlJDEoXG4gIHBhdHRlcm4sXG4gIHtcbiAgICBlcnJvcnMgPSAwLFxuICAgIGN1cnJlbnRMb2NhdGlvbiA9IDAsXG4gICAgZXhwZWN0ZWRMb2NhdGlvbiA9IDAsXG4gICAgZGlzdGFuY2UgPSBDb25maWcuZGlzdGFuY2UsXG4gICAgaWdub3JlTG9jYXRpb24gPSBDb25maWcuaWdub3JlTG9jYXRpb25cbiAgfSA9IHt9XG4pIHtcbiAgY29uc3QgYWNjdXJhY3kgPSBlcnJvcnMgLyBwYXR0ZXJuLmxlbmd0aDtcblxuICBpZiAoaWdub3JlTG9jYXRpb24pIHtcbiAgICByZXR1cm4gYWNjdXJhY3lcbiAgfVxuXG4gIGNvbnN0IHByb3hpbWl0eSA9IE1hdGguYWJzKGV4cGVjdGVkTG9jYXRpb24gLSBjdXJyZW50TG9jYXRpb24pO1xuXG4gIGlmICghZGlzdGFuY2UpIHtcbiAgICAvLyBEb2RnZSBkaXZpZGUgYnkgemVybyBlcnJvci5cbiAgICByZXR1cm4gcHJveGltaXR5ID8gMS4wIDogYWNjdXJhY3lcbiAgfVxuXG4gIHJldHVybiBhY2N1cmFjeSArIHByb3hpbWl0eSAvIGRpc3RhbmNlXG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRNYXNrVG9JbmRpY2VzKFxuICBtYXRjaG1hc2sgPSBbXSxcbiAgbWluTWF0Y2hDaGFyTGVuZ3RoID0gQ29uZmlnLm1pbk1hdGNoQ2hhckxlbmd0aFxuKSB7XG4gIGxldCBpbmRpY2VzID0gW107XG4gIGxldCBzdGFydCA9IC0xO1xuICBsZXQgZW5kID0gLTE7XG4gIGxldCBpID0gMDtcblxuICBmb3IgKGxldCBsZW4gPSBtYXRjaG1hc2subGVuZ3RoOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICBsZXQgbWF0Y2ggPSBtYXRjaG1hc2tbaV07XG4gICAgaWYgKG1hdGNoICYmIHN0YXJ0ID09PSAtMSkge1xuICAgICAgc3RhcnQgPSBpO1xuICAgIH0gZWxzZSBpZiAoIW1hdGNoICYmIHN0YXJ0ICE9PSAtMSkge1xuICAgICAgZW5kID0gaSAtIDE7XG4gICAgICBpZiAoZW5kIC0gc3RhcnQgKyAxID49IG1pbk1hdGNoQ2hhckxlbmd0aCkge1xuICAgICAgICBpbmRpY2VzLnB1c2goW3N0YXJ0LCBlbmRdKTtcbiAgICAgIH1cbiAgICAgIHN0YXJ0ID0gLTE7XG4gICAgfVxuICB9XG5cbiAgLy8gKGktMSAtIHN0YXJ0KSArIDEgPT4gaSAtIHN0YXJ0XG4gIGlmIChtYXRjaG1hc2tbaSAtIDFdICYmIGkgLSBzdGFydCA+PSBtaW5NYXRjaENoYXJMZW5ndGgpIHtcbiAgICBpbmRpY2VzLnB1c2goW3N0YXJ0LCBpIC0gMV0pO1xuICB9XG5cbiAgcmV0dXJuIGluZGljZXNcbn1cblxuLy8gTWFjaGluZSB3b3JkIHNpemVcbmNvbnN0IE1BWF9CSVRTID0gMzI7XG5cbmZ1bmN0aW9uIHNlYXJjaChcbiAgdGV4dCxcbiAgcGF0dGVybixcbiAgcGF0dGVybkFscGhhYmV0LFxuICB7XG4gICAgbG9jYXRpb24gPSBDb25maWcubG9jYXRpb24sXG4gICAgZGlzdGFuY2UgPSBDb25maWcuZGlzdGFuY2UsXG4gICAgdGhyZXNob2xkID0gQ29uZmlnLnRocmVzaG9sZCxcbiAgICBmaW5kQWxsTWF0Y2hlcyA9IENvbmZpZy5maW5kQWxsTWF0Y2hlcyxcbiAgICBtaW5NYXRjaENoYXJMZW5ndGggPSBDb25maWcubWluTWF0Y2hDaGFyTGVuZ3RoLFxuICAgIGluY2x1ZGVNYXRjaGVzID0gQ29uZmlnLmluY2x1ZGVNYXRjaGVzLFxuICAgIGlnbm9yZUxvY2F0aW9uID0gQ29uZmlnLmlnbm9yZUxvY2F0aW9uXG4gIH0gPSB7fVxuKSB7XG4gIGlmIChwYXR0ZXJuLmxlbmd0aCA+IE1BWF9CSVRTKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFBBVFRFUk5fTEVOR1RIX1RPT19MQVJHRShNQVhfQklUUykpXG4gIH1cblxuICBjb25zdCBwYXR0ZXJuTGVuID0gcGF0dGVybi5sZW5ndGg7XG4gIC8vIFNldCBzdGFydGluZyBsb2NhdGlvbiBhdCBiZWdpbm5pbmcgdGV4dCBhbmQgaW5pdGlhbGl6ZSB0aGUgYWxwaGFiZXQuXG4gIGNvbnN0IHRleHRMZW4gPSB0ZXh0Lmxlbmd0aDtcbiAgLy8gSGFuZGxlIHRoZSBjYXNlIHdoZW4gbG9jYXRpb24gPiB0ZXh0Lmxlbmd0aFxuICBjb25zdCBleHBlY3RlZExvY2F0aW9uID0gTWF0aC5tYXgoMCwgTWF0aC5taW4obG9jYXRpb24sIHRleHRMZW4pKTtcbiAgLy8gSGlnaGVzdCBzY29yZSBiZXlvbmQgd2hpY2ggd2UgZ2l2ZSB1cC5cbiAgbGV0IGN1cnJlbnRUaHJlc2hvbGQgPSB0aHJlc2hvbGQ7XG4gIC8vIElzIHRoZXJlIGEgbmVhcmJ5IGV4YWN0IG1hdGNoPyAoc3BlZWR1cClcbiAgbGV0IGJlc3RMb2NhdGlvbiA9IGV4cGVjdGVkTG9jYXRpb247XG5cbiAgLy8gUGVyZm9ybWFuY2U6IG9ubHkgY29tcHV0ZXIgbWF0Y2hlcyB3aGVuIHRoZSBtaW5NYXRjaENoYXJMZW5ndGggPiAxXG4gIC8vIE9SIGlmIGBpbmNsdWRlTWF0Y2hlc2AgaXMgdHJ1ZS5cbiAgY29uc3QgY29tcHV0ZU1hdGNoZXMgPSBtaW5NYXRjaENoYXJMZW5ndGggPiAxIHx8IGluY2x1ZGVNYXRjaGVzO1xuICAvLyBBIG1hc2sgb2YgdGhlIG1hdGNoZXMsIHVzZWQgZm9yIGJ1aWxkaW5nIHRoZSBpbmRpY2VzXG4gIGNvbnN0IG1hdGNoTWFzayA9IGNvbXB1dGVNYXRjaGVzID8gQXJyYXkodGV4dExlbikgOiBbXTtcblxuICBsZXQgaW5kZXg7XG5cbiAgLy8gR2V0IGFsbCBleGFjdCBtYXRjaGVzLCBoZXJlIGZvciBzcGVlZCB1cFxuICB3aGlsZSAoKGluZGV4ID0gdGV4dC5pbmRleE9mKHBhdHRlcm4sIGJlc3RMb2NhdGlvbikpID4gLTEpIHtcbiAgICBsZXQgc2NvcmUgPSBjb21wdXRlU2NvcmUkMShwYXR0ZXJuLCB7XG4gICAgICBjdXJyZW50TG9jYXRpb246IGluZGV4LFxuICAgICAgZXhwZWN0ZWRMb2NhdGlvbixcbiAgICAgIGRpc3RhbmNlLFxuICAgICAgaWdub3JlTG9jYXRpb25cbiAgICB9KTtcblxuICAgIGN1cnJlbnRUaHJlc2hvbGQgPSBNYXRoLm1pbihzY29yZSwgY3VycmVudFRocmVzaG9sZCk7XG4gICAgYmVzdExvY2F0aW9uID0gaW5kZXggKyBwYXR0ZXJuTGVuO1xuXG4gICAgaWYgKGNvbXB1dGVNYXRjaGVzKSB7XG4gICAgICBsZXQgaSA9IDA7XG4gICAgICB3aGlsZSAoaSA8IHBhdHRlcm5MZW4pIHtcbiAgICAgICAgbWF0Y2hNYXNrW2luZGV4ICsgaV0gPSAxO1xuICAgICAgICBpICs9IDE7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gUmVzZXQgdGhlIGJlc3QgbG9jYXRpb25cbiAgYmVzdExvY2F0aW9uID0gLTE7XG5cbiAgbGV0IGxhc3RCaXRBcnIgPSBbXTtcbiAgbGV0IGZpbmFsU2NvcmUgPSAxO1xuICBsZXQgYmluTWF4ID0gcGF0dGVybkxlbiArIHRleHRMZW47XG5cbiAgY29uc3QgbWFzayA9IDEgPDwgKHBhdHRlcm5MZW4gLSAxKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdHRlcm5MZW47IGkgKz0gMSkge1xuICAgIC8vIFNjYW4gZm9yIHRoZSBiZXN0IG1hdGNoOyBlYWNoIGl0ZXJhdGlvbiBhbGxvd3MgZm9yIG9uZSBtb3JlIGVycm9yLlxuICAgIC8vIFJ1biBhIGJpbmFyeSBzZWFyY2ggdG8gZGV0ZXJtaW5lIGhvdyBmYXIgZnJvbSB0aGUgbWF0Y2ggbG9jYXRpb24gd2UgY2FuIHN0cmF5XG4gICAgLy8gYXQgdGhpcyBlcnJvciBsZXZlbC5cbiAgICBsZXQgYmluTWluID0gMDtcbiAgICBsZXQgYmluTWlkID0gYmluTWF4O1xuXG4gICAgd2hpbGUgKGJpbk1pbiA8IGJpbk1pZCkge1xuICAgICAgY29uc3Qgc2NvcmUgPSBjb21wdXRlU2NvcmUkMShwYXR0ZXJuLCB7XG4gICAgICAgIGVycm9yczogaSxcbiAgICAgICAgY3VycmVudExvY2F0aW9uOiBleHBlY3RlZExvY2F0aW9uICsgYmluTWlkLFxuICAgICAgICBleHBlY3RlZExvY2F0aW9uLFxuICAgICAgICBkaXN0YW5jZSxcbiAgICAgICAgaWdub3JlTG9jYXRpb25cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoc2NvcmUgPD0gY3VycmVudFRocmVzaG9sZCkge1xuICAgICAgICBiaW5NaW4gPSBiaW5NaWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiaW5NYXggPSBiaW5NaWQ7XG4gICAgICB9XG5cbiAgICAgIGJpbk1pZCA9IE1hdGguZmxvb3IoKGJpbk1heCAtIGJpbk1pbikgLyAyICsgYmluTWluKTtcbiAgICB9XG5cbiAgICAvLyBVc2UgdGhlIHJlc3VsdCBmcm9tIHRoaXMgaXRlcmF0aW9uIGFzIHRoZSBtYXhpbXVtIGZvciB0aGUgbmV4dC5cbiAgICBiaW5NYXggPSBiaW5NaWQ7XG5cbiAgICBsZXQgc3RhcnQgPSBNYXRoLm1heCgxLCBleHBlY3RlZExvY2F0aW9uIC0gYmluTWlkICsgMSk7XG4gICAgbGV0IGZpbmlzaCA9IGZpbmRBbGxNYXRjaGVzXG4gICAgICA/IHRleHRMZW5cbiAgICAgIDogTWF0aC5taW4oZXhwZWN0ZWRMb2NhdGlvbiArIGJpbk1pZCwgdGV4dExlbikgKyBwYXR0ZXJuTGVuO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgYml0IGFycmF5XG4gICAgbGV0IGJpdEFyciA9IEFycmF5KGZpbmlzaCArIDIpO1xuXG4gICAgYml0QXJyW2ZpbmlzaCArIDFdID0gKDEgPDwgaSkgLSAxO1xuXG4gICAgZm9yIChsZXQgaiA9IGZpbmlzaDsgaiA+PSBzdGFydDsgaiAtPSAxKSB7XG4gICAgICBsZXQgY3VycmVudExvY2F0aW9uID0gaiAtIDE7XG4gICAgICBsZXQgY2hhck1hdGNoID0gcGF0dGVybkFscGhhYmV0W3RleHQuY2hhckF0KGN1cnJlbnRMb2NhdGlvbildO1xuXG4gICAgICBpZiAoY29tcHV0ZU1hdGNoZXMpIHtcbiAgICAgICAgLy8gU3BlZWQgdXA6IHF1aWNrIGJvb2wgdG8gaW50IGNvbnZlcnNpb24gKGkuZSwgYGNoYXJNYXRjaCA/IDEgOiAwYClcbiAgICAgICAgbWF0Y2hNYXNrW2N1cnJlbnRMb2NhdGlvbl0gPSArISFjaGFyTWF0Y2g7XG4gICAgICB9XG5cbiAgICAgIC8vIEZpcnN0IHBhc3M6IGV4YWN0IG1hdGNoXG4gICAgICBiaXRBcnJbal0gPSAoKGJpdEFycltqICsgMV0gPDwgMSkgfCAxKSAmIGNoYXJNYXRjaDtcblxuICAgICAgLy8gU3Vic2VxdWVudCBwYXNzZXM6IGZ1enp5IG1hdGNoXG4gICAgICBpZiAoaSkge1xuICAgICAgICBiaXRBcnJbal0gfD1cbiAgICAgICAgICAoKGxhc3RCaXRBcnJbaiArIDFdIHwgbGFzdEJpdEFycltqXSkgPDwgMSkgfCAxIHwgbGFzdEJpdEFycltqICsgMV07XG4gICAgICB9XG5cbiAgICAgIGlmIChiaXRBcnJbal0gJiBtYXNrKSB7XG4gICAgICAgIGZpbmFsU2NvcmUgPSBjb21wdXRlU2NvcmUkMShwYXR0ZXJuLCB7XG4gICAgICAgICAgZXJyb3JzOiBpLFxuICAgICAgICAgIGN1cnJlbnRMb2NhdGlvbixcbiAgICAgICAgICBleHBlY3RlZExvY2F0aW9uLFxuICAgICAgICAgIGRpc3RhbmNlLFxuICAgICAgICAgIGlnbm9yZUxvY2F0aW9uXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRoaXMgbWF0Y2ggd2lsbCBhbG1vc3QgY2VydGFpbmx5IGJlIGJldHRlciB0aGFuIGFueSBleGlzdGluZyBtYXRjaC5cbiAgICAgICAgLy8gQnV0IGNoZWNrIGFueXdheS5cbiAgICAgICAgaWYgKGZpbmFsU2NvcmUgPD0gY3VycmVudFRocmVzaG9sZCkge1xuICAgICAgICAgIC8vIEluZGVlZCBpdCBpc1xuICAgICAgICAgIGN1cnJlbnRUaHJlc2hvbGQgPSBmaW5hbFNjb3JlO1xuICAgICAgICAgIGJlc3RMb2NhdGlvbiA9IGN1cnJlbnRMb2NhdGlvbjtcblxuICAgICAgICAgIC8vIEFscmVhZHkgcGFzc2VkIGBsb2NgLCBkb3duaGlsbCBmcm9tIGhlcmUgb24gaW4uXG4gICAgICAgICAgaWYgKGJlc3RMb2NhdGlvbiA8PSBleHBlY3RlZExvY2F0aW9uKSB7XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFdoZW4gcGFzc2luZyBgYmVzdExvY2F0aW9uYCwgZG9uJ3QgZXhjZWVkIG91ciBjdXJyZW50IGRpc3RhbmNlIGZyb20gYGV4cGVjdGVkTG9jYXRpb25gLlxuICAgICAgICAgIHN0YXJ0ID0gTWF0aC5tYXgoMSwgMiAqIGV4cGVjdGVkTG9jYXRpb24gLSBiZXN0TG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTm8gaG9wZSBmb3IgYSAoYmV0dGVyKSBtYXRjaCBhdCBncmVhdGVyIGVycm9yIGxldmVscy5cbiAgICBjb25zdCBzY29yZSA9IGNvbXB1dGVTY29yZSQxKHBhdHRlcm4sIHtcbiAgICAgIGVycm9yczogaSArIDEsXG4gICAgICBjdXJyZW50TG9jYXRpb246IGV4cGVjdGVkTG9jYXRpb24sXG4gICAgICBleHBlY3RlZExvY2F0aW9uLFxuICAgICAgZGlzdGFuY2UsXG4gICAgICBpZ25vcmVMb2NhdGlvblxuICAgIH0pO1xuXG4gICAgaWYgKHNjb3JlID4gY3VycmVudFRocmVzaG9sZCkge1xuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBsYXN0Qml0QXJyID0gYml0QXJyO1xuICB9XG5cbiAgY29uc3QgcmVzdWx0ID0ge1xuICAgIGlzTWF0Y2g6IGJlc3RMb2NhdGlvbiA+PSAwLFxuICAgIC8vIENvdW50IGV4YWN0IG1hdGNoZXMgKHRob3NlIHdpdGggYSBzY29yZSBvZiAwKSB0byBiZSBcImFsbW9zdFwiIGV4YWN0XG4gICAgc2NvcmU6IE1hdGgubWF4KDAuMDAxLCBmaW5hbFNjb3JlKVxuICB9O1xuXG4gIGlmIChjb21wdXRlTWF0Y2hlcykge1xuICAgIGNvbnN0IGluZGljZXMgPSBjb252ZXJ0TWFza1RvSW5kaWNlcyhtYXRjaE1hc2ssIG1pbk1hdGNoQ2hhckxlbmd0aCk7XG4gICAgaWYgKCFpbmRpY2VzLmxlbmd0aCkge1xuICAgICAgcmVzdWx0LmlzTWF0Y2ggPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKGluY2x1ZGVNYXRjaGVzKSB7XG4gICAgICByZXN1bHQuaW5kaWNlcyA9IGluZGljZXM7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5mdW5jdGlvbiBjcmVhdGVQYXR0ZXJuQWxwaGFiZXQocGF0dGVybikge1xuICBsZXQgbWFzayA9IHt9O1xuXG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSBwYXR0ZXJuLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgY29uc3QgY2hhciA9IHBhdHRlcm4uY2hhckF0KGkpO1xuICAgIG1hc2tbY2hhcl0gPSAobWFza1tjaGFyXSB8fCAwKSB8ICgxIDw8IChsZW4gLSBpIC0gMSkpO1xuICB9XG5cbiAgcmV0dXJuIG1hc2tcbn1cblxuY2xhc3MgQml0YXBTZWFyY2gge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwYXR0ZXJuLFxuICAgIHtcbiAgICAgIGxvY2F0aW9uID0gQ29uZmlnLmxvY2F0aW9uLFxuICAgICAgdGhyZXNob2xkID0gQ29uZmlnLnRocmVzaG9sZCxcbiAgICAgIGRpc3RhbmNlID0gQ29uZmlnLmRpc3RhbmNlLFxuICAgICAgaW5jbHVkZU1hdGNoZXMgPSBDb25maWcuaW5jbHVkZU1hdGNoZXMsXG4gICAgICBmaW5kQWxsTWF0Y2hlcyA9IENvbmZpZy5maW5kQWxsTWF0Y2hlcyxcbiAgICAgIG1pbk1hdGNoQ2hhckxlbmd0aCA9IENvbmZpZy5taW5NYXRjaENoYXJMZW5ndGgsXG4gICAgICBpc0Nhc2VTZW5zaXRpdmUgPSBDb25maWcuaXNDYXNlU2Vuc2l0aXZlLFxuICAgICAgaWdub3JlTG9jYXRpb24gPSBDb25maWcuaWdub3JlTG9jYXRpb25cbiAgICB9ID0ge31cbiAgKSB7XG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgbG9jYXRpb24sXG4gICAgICB0aHJlc2hvbGQsXG4gICAgICBkaXN0YW5jZSxcbiAgICAgIGluY2x1ZGVNYXRjaGVzLFxuICAgICAgZmluZEFsbE1hdGNoZXMsXG4gICAgICBtaW5NYXRjaENoYXJMZW5ndGgsXG4gICAgICBpc0Nhc2VTZW5zaXRpdmUsXG4gICAgICBpZ25vcmVMb2NhdGlvblxuICAgIH07XG5cbiAgICB0aGlzLnBhdHRlcm4gPSBpc0Nhc2VTZW5zaXRpdmUgPyBwYXR0ZXJuIDogcGF0dGVybi50b0xvd2VyQ2FzZSgpO1xuXG4gICAgdGhpcy5jaHVua3MgPSBbXTtcblxuICAgIGlmICghdGhpcy5wYXR0ZXJuLmxlbmd0aCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgYWRkQ2h1bmsgPSAocGF0dGVybiwgc3RhcnRJbmRleCkgPT4ge1xuICAgICAgdGhpcy5jaHVua3MucHVzaCh7XG4gICAgICAgIHBhdHRlcm4sXG4gICAgICAgIGFscGhhYmV0OiBjcmVhdGVQYXR0ZXJuQWxwaGFiZXQocGF0dGVybiksXG4gICAgICAgIHN0YXJ0SW5kZXhcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBsZW4gPSB0aGlzLnBhdHRlcm4ubGVuZ3RoO1xuXG4gICAgaWYgKGxlbiA+IE1BWF9CSVRTKSB7XG4gICAgICBsZXQgaSA9IDA7XG4gICAgICBjb25zdCByZW1haW5kZXIgPSBsZW4gJSBNQVhfQklUUztcbiAgICAgIGNvbnN0IGVuZCA9IGxlbiAtIHJlbWFpbmRlcjtcblxuICAgICAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICAgICAgYWRkQ2h1bmsodGhpcy5wYXR0ZXJuLnN1YnN0cihpLCBNQVhfQklUUyksIGkpO1xuICAgICAgICBpICs9IE1BWF9CSVRTO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVtYWluZGVyKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBsZW4gLSBNQVhfQklUUztcbiAgICAgICAgYWRkQ2h1bmsodGhpcy5wYXR0ZXJuLnN1YnN0cihzdGFydEluZGV4KSwgc3RhcnRJbmRleCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGFkZENodW5rKHRoaXMucGF0dGVybiwgMCk7XG4gICAgfVxuICB9XG5cbiAgc2VhcmNoSW4odGV4dCkge1xuICAgIGNvbnN0IHsgaXNDYXNlU2Vuc2l0aXZlLCBpbmNsdWRlTWF0Y2hlcyB9ID0gdGhpcy5vcHRpb25zO1xuXG4gICAgaWYgKCFpc0Nhc2VTZW5zaXRpdmUpIHtcbiAgICAgIHRleHQgPSB0ZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgLy8gRXhhY3QgbWF0Y2hcbiAgICBpZiAodGhpcy5wYXR0ZXJuID09PSB0ZXh0KSB7XG4gICAgICBsZXQgcmVzdWx0ID0ge1xuICAgICAgICBpc01hdGNoOiB0cnVlLFxuICAgICAgICBzY29yZTogMFxuICAgICAgfTtcblxuICAgICAgaWYgKGluY2x1ZGVNYXRjaGVzKSB7XG4gICAgICAgIHJlc3VsdC5pbmRpY2VzID0gW1swLCB0ZXh0Lmxlbmd0aCAtIDFdXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cblxuICAgIC8vIE90aGVyd2lzZSwgdXNlIEJpdGFwIGFsZ29yaXRobVxuICAgIGNvbnN0IHtcbiAgICAgIGxvY2F0aW9uLFxuICAgICAgZGlzdGFuY2UsXG4gICAgICB0aHJlc2hvbGQsXG4gICAgICBmaW5kQWxsTWF0Y2hlcyxcbiAgICAgIG1pbk1hdGNoQ2hhckxlbmd0aCxcbiAgICAgIGlnbm9yZUxvY2F0aW9uXG4gICAgfSA9IHRoaXMub3B0aW9ucztcblxuICAgIGxldCBhbGxJbmRpY2VzID0gW107XG4gICAgbGV0IHRvdGFsU2NvcmUgPSAwO1xuICAgIGxldCBoYXNNYXRjaGVzID0gZmFsc2U7XG5cbiAgICB0aGlzLmNodW5rcy5mb3JFYWNoKCh7IHBhdHRlcm4sIGFscGhhYmV0LCBzdGFydEluZGV4IH0pID0+IHtcbiAgICAgIGNvbnN0IHsgaXNNYXRjaCwgc2NvcmUsIGluZGljZXMgfSA9IHNlYXJjaCh0ZXh0LCBwYXR0ZXJuLCBhbHBoYWJldCwge1xuICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24gKyBzdGFydEluZGV4LFxuICAgICAgICBkaXN0YW5jZSxcbiAgICAgICAgdGhyZXNob2xkLFxuICAgICAgICBmaW5kQWxsTWF0Y2hlcyxcbiAgICAgICAgbWluTWF0Y2hDaGFyTGVuZ3RoLFxuICAgICAgICBpbmNsdWRlTWF0Y2hlcyxcbiAgICAgICAgaWdub3JlTG9jYXRpb25cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaXNNYXRjaCkge1xuICAgICAgICBoYXNNYXRjaGVzID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgdG90YWxTY29yZSArPSBzY29yZTtcblxuICAgICAgaWYgKGlzTWF0Y2ggJiYgaW5kaWNlcykge1xuICAgICAgICBhbGxJbmRpY2VzID0gWy4uLmFsbEluZGljZXMsIC4uLmluZGljZXNdO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGV0IHJlc3VsdCA9IHtcbiAgICAgIGlzTWF0Y2g6IGhhc01hdGNoZXMsXG4gICAgICBzY29yZTogaGFzTWF0Y2hlcyA/IHRvdGFsU2NvcmUgLyB0aGlzLmNodW5rcy5sZW5ndGggOiAxXG4gICAgfTtcblxuICAgIGlmIChoYXNNYXRjaGVzICYmIGluY2x1ZGVNYXRjaGVzKSB7XG4gICAgICByZXN1bHQuaW5kaWNlcyA9IGFsbEluZGljZXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG59XG5cbmNsYXNzIEJhc2VNYXRjaCB7XG4gIGNvbnN0cnVjdG9yKHBhdHRlcm4pIHtcbiAgICB0aGlzLnBhdHRlcm4gPSBwYXR0ZXJuO1xuICB9XG4gIHN0YXRpYyBpc011bHRpTWF0Y2gocGF0dGVybikge1xuICAgIHJldHVybiBnZXRNYXRjaChwYXR0ZXJuLCB0aGlzLm11bHRpUmVnZXgpXG4gIH1cbiAgc3RhdGljIGlzU2luZ2xlTWF0Y2gocGF0dGVybikge1xuICAgIHJldHVybiBnZXRNYXRjaChwYXR0ZXJuLCB0aGlzLnNpbmdsZVJlZ2V4KVxuICB9XG4gIHNlYXJjaCgvKnRleHQqLykge31cbn1cblxuZnVuY3Rpb24gZ2V0TWF0Y2gocGF0dGVybiwgZXhwKSB7XG4gIGNvbnN0IG1hdGNoZXMgPSBwYXR0ZXJuLm1hdGNoKGV4cCk7XG4gIHJldHVybiBtYXRjaGVzID8gbWF0Y2hlc1sxXSA6IG51bGxcbn1cblxuLy8gVG9rZW46ICdmaWxlXG5cbmNsYXNzIEV4YWN0TWF0Y2ggZXh0ZW5kcyBCYXNlTWF0Y2gge1xuICBjb25zdHJ1Y3RvcihwYXR0ZXJuKSB7XG4gICAgc3VwZXIocGF0dGVybik7XG4gIH1cbiAgc3RhdGljIGdldCB0eXBlKCkge1xuICAgIHJldHVybiAnZXhhY3QnXG4gIH1cbiAgc3RhdGljIGdldCBtdWx0aVJlZ2V4KCkge1xuICAgIHJldHVybiAvXj1cIiguKilcIiQvXG4gIH1cbiAgc3RhdGljIGdldCBzaW5nbGVSZWdleCgpIHtcbiAgICByZXR1cm4gL149KC4qKSQvXG4gIH1cbiAgc2VhcmNoKHRleHQpIHtcbiAgICBjb25zdCBpc01hdGNoID0gdGV4dCA9PT0gdGhpcy5wYXR0ZXJuO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzTWF0Y2gsXG4gICAgICBzY29yZTogaXNNYXRjaCA/IDAgOiAxLFxuICAgICAgaW5kaWNlczogWzAsIHRoaXMucGF0dGVybi5sZW5ndGggLSAxXVxuICAgIH1cbiAgfVxufVxuXG4vLyBUb2tlbjogIWZpcmVcblxuY2xhc3MgSW52ZXJzZUV4YWN0TWF0Y2ggZXh0ZW5kcyBCYXNlTWF0Y2gge1xuICBjb25zdHJ1Y3RvcihwYXR0ZXJuKSB7XG4gICAgc3VwZXIocGF0dGVybik7XG4gIH1cbiAgc3RhdGljIGdldCB0eXBlKCkge1xuICAgIHJldHVybiAnaW52ZXJzZS1leGFjdCdcbiAgfVxuICBzdGF0aWMgZ2V0IG11bHRpUmVnZXgoKSB7XG4gICAgcmV0dXJuIC9eIVwiKC4qKVwiJC9cbiAgfVxuICBzdGF0aWMgZ2V0IHNpbmdsZVJlZ2V4KCkge1xuICAgIHJldHVybiAvXiEoLiopJC9cbiAgfVxuICBzZWFyY2godGV4dCkge1xuICAgIGNvbnN0IGluZGV4ID0gdGV4dC5pbmRleE9mKHRoaXMucGF0dGVybik7XG4gICAgY29uc3QgaXNNYXRjaCA9IGluZGV4ID09PSAtMTtcblxuICAgIHJldHVybiB7XG4gICAgICBpc01hdGNoLFxuICAgICAgc2NvcmU6IGlzTWF0Y2ggPyAwIDogMSxcbiAgICAgIGluZGljZXM6IFswLCB0ZXh0Lmxlbmd0aCAtIDFdXG4gICAgfVxuICB9XG59XG5cbi8vIFRva2VuOiBeZmlsZVxuXG5jbGFzcyBQcmVmaXhFeGFjdE1hdGNoIGV4dGVuZHMgQmFzZU1hdGNoIHtcbiAgY29uc3RydWN0b3IocGF0dGVybikge1xuICAgIHN1cGVyKHBhdHRlcm4pO1xuICB9XG4gIHN0YXRpYyBnZXQgdHlwZSgpIHtcbiAgICByZXR1cm4gJ3ByZWZpeC1leGFjdCdcbiAgfVxuICBzdGF0aWMgZ2V0IG11bHRpUmVnZXgoKSB7XG4gICAgcmV0dXJuIC9eXFxeXCIoLiopXCIkL1xuICB9XG4gIHN0YXRpYyBnZXQgc2luZ2xlUmVnZXgoKSB7XG4gICAgcmV0dXJuIC9eXFxeKC4qKSQvXG4gIH1cbiAgc2VhcmNoKHRleHQpIHtcbiAgICBjb25zdCBpc01hdGNoID0gdGV4dC5zdGFydHNXaXRoKHRoaXMucGF0dGVybik7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNNYXRjaCxcbiAgICAgIHNjb3JlOiBpc01hdGNoID8gMCA6IDEsXG4gICAgICBpbmRpY2VzOiBbMCwgdGhpcy5wYXR0ZXJuLmxlbmd0aCAtIDFdXG4gICAgfVxuICB9XG59XG5cbi8vIFRva2VuOiAhXmZpcmVcblxuY2xhc3MgSW52ZXJzZVByZWZpeEV4YWN0TWF0Y2ggZXh0ZW5kcyBCYXNlTWF0Y2gge1xuICBjb25zdHJ1Y3RvcihwYXR0ZXJuKSB7XG4gICAgc3VwZXIocGF0dGVybik7XG4gIH1cbiAgc3RhdGljIGdldCB0eXBlKCkge1xuICAgIHJldHVybiAnaW52ZXJzZS1wcmVmaXgtZXhhY3QnXG4gIH1cbiAgc3RhdGljIGdldCBtdWx0aVJlZ2V4KCkge1xuICAgIHJldHVybiAvXiFcXF5cIiguKilcIiQvXG4gIH1cbiAgc3RhdGljIGdldCBzaW5nbGVSZWdleCgpIHtcbiAgICByZXR1cm4gL14hXFxeKC4qKSQvXG4gIH1cbiAgc2VhcmNoKHRleHQpIHtcbiAgICBjb25zdCBpc01hdGNoID0gIXRleHQuc3RhcnRzV2l0aCh0aGlzLnBhdHRlcm4pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzTWF0Y2gsXG4gICAgICBzY29yZTogaXNNYXRjaCA/IDAgOiAxLFxuICAgICAgaW5kaWNlczogWzAsIHRleHQubGVuZ3RoIC0gMV1cbiAgICB9XG4gIH1cbn1cblxuLy8gVG9rZW46IC5maWxlJFxuXG5jbGFzcyBTdWZmaXhFeGFjdE1hdGNoIGV4dGVuZHMgQmFzZU1hdGNoIHtcbiAgY29uc3RydWN0b3IocGF0dGVybikge1xuICAgIHN1cGVyKHBhdHRlcm4pO1xuICB9XG4gIHN0YXRpYyBnZXQgdHlwZSgpIHtcbiAgICByZXR1cm4gJ3N1ZmZpeC1leGFjdCdcbiAgfVxuICBzdGF0aWMgZ2V0IG11bHRpUmVnZXgoKSB7XG4gICAgcmV0dXJuIC9eXCIoLiopXCJcXCQkL1xuICB9XG4gIHN0YXRpYyBnZXQgc2luZ2xlUmVnZXgoKSB7XG4gICAgcmV0dXJuIC9eKC4qKVxcJCQvXG4gIH1cbiAgc2VhcmNoKHRleHQpIHtcbiAgICBjb25zdCBpc01hdGNoID0gdGV4dC5lbmRzV2l0aCh0aGlzLnBhdHRlcm4pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzTWF0Y2gsXG4gICAgICBzY29yZTogaXNNYXRjaCA/IDAgOiAxLFxuICAgICAgaW5kaWNlczogW3RleHQubGVuZ3RoIC0gdGhpcy5wYXR0ZXJuLmxlbmd0aCwgdGV4dC5sZW5ndGggLSAxXVxuICAgIH1cbiAgfVxufVxuXG4vLyBUb2tlbjogIS5maWxlJFxuXG5jbGFzcyBJbnZlcnNlU3VmZml4RXhhY3RNYXRjaCBleHRlbmRzIEJhc2VNYXRjaCB7XG4gIGNvbnN0cnVjdG9yKHBhdHRlcm4pIHtcbiAgICBzdXBlcihwYXR0ZXJuKTtcbiAgfVxuICBzdGF0aWMgZ2V0IHR5cGUoKSB7XG4gICAgcmV0dXJuICdpbnZlcnNlLXN1ZmZpeC1leGFjdCdcbiAgfVxuICBzdGF0aWMgZ2V0IG11bHRpUmVnZXgoKSB7XG4gICAgcmV0dXJuIC9eIVwiKC4qKVwiXFwkJC9cbiAgfVxuICBzdGF0aWMgZ2V0IHNpbmdsZVJlZ2V4KCkge1xuICAgIHJldHVybiAvXiEoLiopXFwkJC9cbiAgfVxuICBzZWFyY2godGV4dCkge1xuICAgIGNvbnN0IGlzTWF0Y2ggPSAhdGV4dC5lbmRzV2l0aCh0aGlzLnBhdHRlcm4pO1xuICAgIHJldHVybiB7XG4gICAgICBpc01hdGNoLFxuICAgICAgc2NvcmU6IGlzTWF0Y2ggPyAwIDogMSxcbiAgICAgIGluZGljZXM6IFswLCB0ZXh0Lmxlbmd0aCAtIDFdXG4gICAgfVxuICB9XG59XG5cbmNsYXNzIEZ1enp5TWF0Y2ggZXh0ZW5kcyBCYXNlTWF0Y2gge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwYXR0ZXJuLFxuICAgIHtcbiAgICAgIGxvY2F0aW9uID0gQ29uZmlnLmxvY2F0aW9uLFxuICAgICAgdGhyZXNob2xkID0gQ29uZmlnLnRocmVzaG9sZCxcbiAgICAgIGRpc3RhbmNlID0gQ29uZmlnLmRpc3RhbmNlLFxuICAgICAgaW5jbHVkZU1hdGNoZXMgPSBDb25maWcuaW5jbHVkZU1hdGNoZXMsXG4gICAgICBmaW5kQWxsTWF0Y2hlcyA9IENvbmZpZy5maW5kQWxsTWF0Y2hlcyxcbiAgICAgIG1pbk1hdGNoQ2hhckxlbmd0aCA9IENvbmZpZy5taW5NYXRjaENoYXJMZW5ndGgsXG4gICAgICBpc0Nhc2VTZW5zaXRpdmUgPSBDb25maWcuaXNDYXNlU2Vuc2l0aXZlLFxuICAgICAgaWdub3JlTG9jYXRpb24gPSBDb25maWcuaWdub3JlTG9jYXRpb25cbiAgICB9ID0ge31cbiAgKSB7XG4gICAgc3VwZXIocGF0dGVybik7XG4gICAgdGhpcy5fYml0YXBTZWFyY2ggPSBuZXcgQml0YXBTZWFyY2gocGF0dGVybiwge1xuICAgICAgbG9jYXRpb24sXG4gICAgICB0aHJlc2hvbGQsXG4gICAgICBkaXN0YW5jZSxcbiAgICAgIGluY2x1ZGVNYXRjaGVzLFxuICAgICAgZmluZEFsbE1hdGNoZXMsXG4gICAgICBtaW5NYXRjaENoYXJMZW5ndGgsXG4gICAgICBpc0Nhc2VTZW5zaXRpdmUsXG4gICAgICBpZ25vcmVMb2NhdGlvblxuICAgIH0pO1xuICB9XG4gIHN0YXRpYyBnZXQgdHlwZSgpIHtcbiAgICByZXR1cm4gJ2Z1enp5J1xuICB9XG4gIHN0YXRpYyBnZXQgbXVsdGlSZWdleCgpIHtcbiAgICByZXR1cm4gL15cIiguKilcIiQvXG4gIH1cbiAgc3RhdGljIGdldCBzaW5nbGVSZWdleCgpIHtcbiAgICByZXR1cm4gL14oLiopJC9cbiAgfVxuICBzZWFyY2godGV4dCkge1xuICAgIHJldHVybiB0aGlzLl9iaXRhcFNlYXJjaC5zZWFyY2hJbih0ZXh0KVxuICB9XG59XG5cbi8vIFRva2VuOiAnZmlsZVxuXG5jbGFzcyBJbmNsdWRlTWF0Y2ggZXh0ZW5kcyBCYXNlTWF0Y2gge1xuICBjb25zdHJ1Y3RvcihwYXR0ZXJuKSB7XG4gICAgc3VwZXIocGF0dGVybik7XG4gIH1cbiAgc3RhdGljIGdldCB0eXBlKCkge1xuICAgIHJldHVybiAnaW5jbHVkZSdcbiAgfVxuICBzdGF0aWMgZ2V0IG11bHRpUmVnZXgoKSB7XG4gICAgcmV0dXJuIC9eJ1wiKC4qKVwiJC9cbiAgfVxuICBzdGF0aWMgZ2V0IHNpbmdsZVJlZ2V4KCkge1xuICAgIHJldHVybiAvXicoLiopJC9cbiAgfVxuICBzZWFyY2godGV4dCkge1xuICAgIGxldCBsb2NhdGlvbiA9IDA7XG4gICAgbGV0IGluZGV4O1xuXG4gICAgY29uc3QgaW5kaWNlcyA9IFtdO1xuICAgIGNvbnN0IHBhdHRlcm5MZW4gPSB0aGlzLnBhdHRlcm4ubGVuZ3RoO1xuXG4gICAgLy8gR2V0IGFsbCBleGFjdCBtYXRjaGVzXG4gICAgd2hpbGUgKChpbmRleCA9IHRleHQuaW5kZXhPZih0aGlzLnBhdHRlcm4sIGxvY2F0aW9uKSkgPiAtMSkge1xuICAgICAgbG9jYXRpb24gPSBpbmRleCArIHBhdHRlcm5MZW47XG4gICAgICBpbmRpY2VzLnB1c2goW2luZGV4LCBsb2NhdGlvbiAtIDFdKTtcbiAgICB9XG5cbiAgICBjb25zdCBpc01hdGNoID0gISFpbmRpY2VzLmxlbmd0aDtcblxuICAgIHJldHVybiB7XG4gICAgICBpc01hdGNoLFxuICAgICAgc2NvcmU6IGlzTWF0Y2ggPyAwIDogMSxcbiAgICAgIGluZGljZXNcbiAgICB9XG4gIH1cbn1cblxuLy8g4p2XT3JkZXIgaXMgaW1wb3J0YW50LiBETyBOT1QgQ0hBTkdFLlxuY29uc3Qgc2VhcmNoZXJzID0gW1xuICBFeGFjdE1hdGNoLFxuICBJbmNsdWRlTWF0Y2gsXG4gIFByZWZpeEV4YWN0TWF0Y2gsXG4gIEludmVyc2VQcmVmaXhFeGFjdE1hdGNoLFxuICBJbnZlcnNlU3VmZml4RXhhY3RNYXRjaCxcbiAgU3VmZml4RXhhY3RNYXRjaCxcbiAgSW52ZXJzZUV4YWN0TWF0Y2gsXG4gIEZ1enp5TWF0Y2hcbl07XG5cbmNvbnN0IHNlYXJjaGVyc0xlbiA9IHNlYXJjaGVycy5sZW5ndGg7XG5cbi8vIFJlZ2V4IHRvIHNwbGl0IGJ5IHNwYWNlcywgYnV0IGtlZXAgYW55dGhpbmcgaW4gcXVvdGVzIHRvZ2V0aGVyXG5jb25zdCBTUEFDRV9SRSA9IC8gKyg/PSg/OlteXFxcIl0qXFxcIlteXFxcIl0qXFxcIikqW15cXFwiXSokKS87XG5jb25zdCBPUl9UT0tFTiA9ICd8JztcblxuLy8gUmV0dXJuIGEgMkQgYXJyYXkgcmVwcmVzZW50YXRpb24gb2YgdGhlIHF1ZXJ5LCBmb3Igc2ltcGxlciBwYXJzaW5nLlxuLy8gRXhhbXBsZTpcbi8vIFwiXmNvcmUgZ28kIHwgcmIkIHwgcHkkIHh5JFwiID0+IFtbXCJeY29yZVwiLCBcImdvJFwiXSwgW1wicmIkXCJdLCBbXCJweSRcIiwgXCJ4eSRcIl1dXG5mdW5jdGlvbiBwYXJzZVF1ZXJ5KHBhdHRlcm4sIG9wdGlvbnMgPSB7fSkge1xuICByZXR1cm4gcGF0dGVybi5zcGxpdChPUl9UT0tFTikubWFwKChpdGVtKSA9PiB7XG4gICAgbGV0IHF1ZXJ5ID0gaXRlbVxuICAgICAgLnRyaW0oKVxuICAgICAgLnNwbGl0KFNQQUNFX1JFKVxuICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbSAmJiAhIWl0ZW0udHJpbSgpKTtcblxuICAgIGxldCByZXN1bHRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHF1ZXJ5Lmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICBjb25zdCBxdWVyeUl0ZW0gPSBxdWVyeVtpXTtcblxuICAgICAgLy8gMS4gSGFuZGxlIG11bHRpcGxlIHF1ZXJ5IG1hdGNoIChpLmUsIG9uY2UgdGhhdCBhcmUgcXVvdGVkLCBsaWtlIGBcImhlbGxvIHdvcmxkXCJgKVxuICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgICBsZXQgaWR4ID0gLTE7XG4gICAgICB3aGlsZSAoIWZvdW5kICYmICsraWR4IDwgc2VhcmNoZXJzTGVuKSB7XG4gICAgICAgIGNvbnN0IHNlYXJjaGVyID0gc2VhcmNoZXJzW2lkeF07XG4gICAgICAgIGxldCB0b2tlbiA9IHNlYXJjaGVyLmlzTXVsdGlNYXRjaChxdWVyeUl0ZW0pO1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2gobmV3IHNlYXJjaGVyKHRva2VuLCBvcHRpb25zKSk7XG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyAyLiBIYW5kbGUgc2luZ2xlIHF1ZXJ5IG1hdGNoZXMgKGkuZSwgb25jZSB0aGF0IGFyZSAqbm90KiBxdW90ZWQpXG4gICAgICBpZHggPSAtMTtcbiAgICAgIHdoaWxlICgrK2lkeCA8IHNlYXJjaGVyc0xlbikge1xuICAgICAgICBjb25zdCBzZWFyY2hlciA9IHNlYXJjaGVyc1tpZHhdO1xuICAgICAgICBsZXQgdG9rZW4gPSBzZWFyY2hlci5pc1NpbmdsZU1hdGNoKHF1ZXJ5SXRlbSk7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgIHJlc3VsdHMucHVzaChuZXcgc2VhcmNoZXIodG9rZW4sIG9wdGlvbnMpKTtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHNcbiAgfSlcbn1cblxuLy8gVGhlc2UgZXh0ZW5kZWQgbWF0Y2hlcnMgY2FuIHJldHVybiBhbiBhcnJheSBvZiBtYXRjaGVzLCBhcyBvcHBvc2VkXG4vLyB0byBhIHNpbmdsIG1hdGNoXG5jb25zdCBNdWx0aU1hdGNoU2V0ID0gbmV3IFNldChbRnV6enlNYXRjaC50eXBlLCBJbmNsdWRlTWF0Y2gudHlwZV0pO1xuXG4vKipcbiAqIENvbW1hbmQtbGlrZSBzZWFyY2hpbmdcbiAqID09PT09PT09PT09PT09PT09PT09PT1cbiAqXG4gKiBHaXZlbiBtdWx0aXBsZSBzZWFyY2ggdGVybXMgZGVsaW1pdGVkIGJ5IHNwYWNlcy5lLmcuIGBeanNjcmlwdCAucHl0aG9uJCBydWJ5ICFqYXZhYCxcbiAqIHNlYXJjaCBpbiBhIGdpdmVuIHRleHQuXG4gKlxuICogU2VhcmNoIHN5bnRheDpcbiAqXG4gKiB8IFRva2VuICAgICAgIHwgTWF0Y2ggdHlwZSAgICAgICAgICAgICAgICAgfCBEZXNjcmlwdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IC0tLS0tLS0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8XG4gKiB8IGBqc2NyaXB0YCAgIHwgZnV6enktbWF0Y2ggICAgICAgICAgICAgICAgfCBJdGVtcyB0aGF0IGZ1enp5IG1hdGNoIGBqc2NyaXB0YCAgICAgICB8XG4gKiB8IGA9c2NoZW1lYCAgIHwgZXhhY3QtbWF0Y2ggICAgICAgICAgICAgICAgfCBJdGVtcyB0aGF0IGFyZSBgc2NoZW1lYCAgICAgICAgICAgICAgICB8XG4gKiB8IGAncHl0aG9uYCAgIHwgaW5jbHVkZS1tYXRjaCAgICAgICAgICAgICAgfCBJdGVtcyB0aGF0IGluY2x1ZGUgYHB5dGhvbmAgICAgICAgICAgICB8XG4gKiB8IGAhcnVieWAgICAgIHwgaW52ZXJzZS1leGFjdC1tYXRjaCAgICAgICAgfCBJdGVtcyB0aGF0IGRvIG5vdCBpbmNsdWRlIGBydWJ5YCAgICAgICB8XG4gKiB8IGBeamF2YWAgICAgIHwgcHJlZml4LWV4YWN0LW1hdGNoICAgICAgICAgfCBJdGVtcyB0aGF0IHN0YXJ0IHdpdGggYGphdmFgICAgICAgICAgICB8XG4gKiB8IGAhXmVhcmxhbmdgIHwgaW52ZXJzZS1wcmVmaXgtZXhhY3QtbWF0Y2ggfCBJdGVtcyB0aGF0IGRvIG5vdCBzdGFydCB3aXRoIGBlYXJsYW5nYCB8XG4gKiB8IGAuanMkYCAgICAgIHwgc3VmZml4LWV4YWN0LW1hdGNoICAgICAgICAgfCBJdGVtcyB0aGF0IGVuZCB3aXRoIGAuanNgICAgICAgICAgICAgICB8XG4gKiB8IGAhLmdvJGAgICAgIHwgaW52ZXJzZS1zdWZmaXgtZXhhY3QtbWF0Y2ggfCBJdGVtcyB0aGF0IGRvIG5vdCBlbmQgd2l0aCBgLmdvYCAgICAgICB8XG4gKlxuICogQSBzaW5nbGUgcGlwZSBjaGFyYWN0ZXIgYWN0cyBhcyBhbiBPUiBvcGVyYXRvci4gRm9yIGV4YW1wbGUsIHRoZSBmb2xsb3dpbmdcbiAqIHF1ZXJ5IG1hdGNoZXMgZW50cmllcyB0aGF0IHN0YXJ0IHdpdGggYGNvcmVgIGFuZCBlbmQgd2l0aCBlaXRoZXJgZ29gLCBgcmJgLFxuICogb3JgcHlgLlxuICpcbiAqIGBgYFxuICogXmNvcmUgZ28kIHwgcmIkIHwgcHkkXG4gKiBgYGBcbiAqL1xuY2xhc3MgRXh0ZW5kZWRTZWFyY2gge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwYXR0ZXJuLFxuICAgIHtcbiAgICAgIGlzQ2FzZVNlbnNpdGl2ZSA9IENvbmZpZy5pc0Nhc2VTZW5zaXRpdmUsXG4gICAgICBpbmNsdWRlTWF0Y2hlcyA9IENvbmZpZy5pbmNsdWRlTWF0Y2hlcyxcbiAgICAgIG1pbk1hdGNoQ2hhckxlbmd0aCA9IENvbmZpZy5taW5NYXRjaENoYXJMZW5ndGgsXG4gICAgICBpZ25vcmVMb2NhdGlvbiA9IENvbmZpZy5pZ25vcmVMb2NhdGlvbixcbiAgICAgIGZpbmRBbGxNYXRjaGVzID0gQ29uZmlnLmZpbmRBbGxNYXRjaGVzLFxuICAgICAgbG9jYXRpb24gPSBDb25maWcubG9jYXRpb24sXG4gICAgICB0aHJlc2hvbGQgPSBDb25maWcudGhyZXNob2xkLFxuICAgICAgZGlzdGFuY2UgPSBDb25maWcuZGlzdGFuY2VcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgdGhpcy5xdWVyeSA9IG51bGw7XG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgaXNDYXNlU2Vuc2l0aXZlLFxuICAgICAgaW5jbHVkZU1hdGNoZXMsXG4gICAgICBtaW5NYXRjaENoYXJMZW5ndGgsXG4gICAgICBmaW5kQWxsTWF0Y2hlcyxcbiAgICAgIGlnbm9yZUxvY2F0aW9uLFxuICAgICAgbG9jYXRpb24sXG4gICAgICB0aHJlc2hvbGQsXG4gICAgICBkaXN0YW5jZVxuICAgIH07XG5cbiAgICB0aGlzLnBhdHRlcm4gPSBpc0Nhc2VTZW5zaXRpdmUgPyBwYXR0ZXJuIDogcGF0dGVybi50b0xvd2VyQ2FzZSgpO1xuICAgIHRoaXMucXVlcnkgPSBwYXJzZVF1ZXJ5KHRoaXMucGF0dGVybiwgdGhpcy5vcHRpb25zKTtcbiAgfVxuXG4gIHN0YXRpYyBjb25kaXRpb24oXywgb3B0aW9ucykge1xuICAgIHJldHVybiBvcHRpb25zLnVzZUV4dGVuZGVkU2VhcmNoXG4gIH1cblxuICBzZWFyY2hJbih0ZXh0KSB7XG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLnF1ZXJ5O1xuXG4gICAgaWYgKCFxdWVyeSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNNYXRjaDogZmFsc2UsXG4gICAgICAgIHNjb3JlOiAxXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgeyBpbmNsdWRlTWF0Y2hlcywgaXNDYXNlU2Vuc2l0aXZlIH0gPSB0aGlzLm9wdGlvbnM7XG5cbiAgICB0ZXh0ID0gaXNDYXNlU2Vuc2l0aXZlID8gdGV4dCA6IHRleHQudG9Mb3dlckNhc2UoKTtcblxuICAgIGxldCBudW1NYXRjaGVzID0gMDtcbiAgICBsZXQgYWxsSW5kaWNlcyA9IFtdO1xuICAgIGxldCB0b3RhbFNjb3JlID0gMDtcblxuICAgIC8vIE9Sc1xuICAgIGZvciAobGV0IGkgPSAwLCBxTGVuID0gcXVlcnkubGVuZ3RoOyBpIDwgcUxlbjsgaSArPSAxKSB7XG4gICAgICBjb25zdCBzZWFyY2hlcnMgPSBxdWVyeVtpXTtcblxuICAgICAgLy8gUmVzZXQgaW5kaWNlc1xuICAgICAgYWxsSW5kaWNlcy5sZW5ndGggPSAwO1xuICAgICAgbnVtTWF0Y2hlcyA9IDA7XG5cbiAgICAgIC8vIEFORHNcbiAgICAgIGZvciAobGV0IGogPSAwLCBwTGVuID0gc2VhcmNoZXJzLmxlbmd0aDsgaiA8IHBMZW47IGogKz0gMSkge1xuICAgICAgICBjb25zdCBzZWFyY2hlciA9IHNlYXJjaGVyc1tqXTtcbiAgICAgICAgY29uc3QgeyBpc01hdGNoLCBpbmRpY2VzLCBzY29yZSB9ID0gc2VhcmNoZXIuc2VhcmNoKHRleHQpO1xuXG4gICAgICAgIGlmIChpc01hdGNoKSB7XG4gICAgICAgICAgbnVtTWF0Y2hlcyArPSAxO1xuICAgICAgICAgIHRvdGFsU2NvcmUgKz0gc2NvcmU7XG4gICAgICAgICAgaWYgKGluY2x1ZGVNYXRjaGVzKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gc2VhcmNoZXIuY29uc3RydWN0b3IudHlwZTtcbiAgICAgICAgICAgIGlmIChNdWx0aU1hdGNoU2V0Lmhhcyh0eXBlKSkge1xuICAgICAgICAgICAgICBhbGxJbmRpY2VzID0gWy4uLmFsbEluZGljZXMsIC4uLmluZGljZXNdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYWxsSW5kaWNlcy5wdXNoKGluZGljZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b3RhbFNjb3JlID0gMDtcbiAgICAgICAgICBudW1NYXRjaGVzID0gMDtcbiAgICAgICAgICBhbGxJbmRpY2VzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBPUiBjb25kaXRpb24sIHNvIGlmIFRSVUUsIHJldHVyblxuICAgICAgaWYgKG51bU1hdGNoZXMpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHtcbiAgICAgICAgICBpc01hdGNoOiB0cnVlLFxuICAgICAgICAgIHNjb3JlOiB0b3RhbFNjb3JlIC8gbnVtTWF0Y2hlc1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChpbmNsdWRlTWF0Y2hlcykge1xuICAgICAgICAgIHJlc3VsdC5pbmRpY2VzID0gYWxsSW5kaWNlcztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOb3RoaW5nIHdhcyBtYXRjaGVkXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzTWF0Y2g6IGZhbHNlLFxuICAgICAgc2NvcmU6IDFcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgcmVnaXN0ZXJlZFNlYXJjaGVycyA9IFtdO1xuXG5mdW5jdGlvbiByZWdpc3RlciguLi5hcmdzKSB7XG4gIHJlZ2lzdGVyZWRTZWFyY2hlcnMucHVzaCguLi5hcmdzKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2VhcmNoZXIocGF0dGVybiwgb3B0aW9ucykge1xuICBmb3IgKGxldCBpID0gMCwgbGVuID0gcmVnaXN0ZXJlZFNlYXJjaGVycy5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgIGxldCBzZWFyY2hlckNsYXNzID0gcmVnaXN0ZXJlZFNlYXJjaGVyc1tpXTtcbiAgICBpZiAoc2VhcmNoZXJDbGFzcy5jb25kaXRpb24ocGF0dGVybiwgb3B0aW9ucykpIHtcbiAgICAgIHJldHVybiBuZXcgc2VhcmNoZXJDbGFzcyhwYXR0ZXJuLCBvcHRpb25zKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgQml0YXBTZWFyY2gocGF0dGVybiwgb3B0aW9ucylcbn1cblxuY29uc3QgTG9naWNhbE9wZXJhdG9yID0ge1xuICBBTkQ6ICckYW5kJyxcbiAgT1I6ICckb3InXG59O1xuXG5jb25zdCBLZXlUeXBlID0ge1xuICBQQVRIOiAnJHBhdGgnLFxuICBQQVRURVJOOiAnJHZhbCdcbn07XG5cbmNvbnN0IGlzRXhwcmVzc2lvbiA9IChxdWVyeSkgPT5cbiAgISEocXVlcnlbTG9naWNhbE9wZXJhdG9yLkFORF0gfHwgcXVlcnlbTG9naWNhbE9wZXJhdG9yLk9SXSk7XG5cbmNvbnN0IGlzUGF0aCA9IChxdWVyeSkgPT4gISFxdWVyeVtLZXlUeXBlLlBBVEhdO1xuXG5jb25zdCBpc0xlYWYgPSAocXVlcnkpID0+XG4gICFpc0FycmF5KHF1ZXJ5KSAmJiBpc09iamVjdChxdWVyeSkgJiYgIWlzRXhwcmVzc2lvbihxdWVyeSk7XG5cbmNvbnN0IGNvbnZlcnRUb0V4cGxpY2l0ID0gKHF1ZXJ5KSA9PiAoe1xuICBbTG9naWNhbE9wZXJhdG9yLkFORF06IE9iamVjdC5rZXlzKHF1ZXJ5KS5tYXAoKGtleSkgPT4gKHtcbiAgICBba2V5XTogcXVlcnlba2V5XVxuICB9KSlcbn0pO1xuXG4vLyBXaGVuIGBhdXRvYCBpcyBgdHJ1ZWAsIHRoZSBwYXJzZSBmdW5jdGlvbiB3aWxsIGluZmVyIGFuZCBpbml0aWFsaXplIGFuZCBhZGRcbi8vIHRoZSBhcHByb3ByaWF0ZSBgU2VhcmNoZXJgIGluc3RhbmNlXG5mdW5jdGlvbiBwYXJzZShxdWVyeSwgb3B0aW9ucywgeyBhdXRvID0gdHJ1ZSB9ID0ge30pIHtcbiAgY29uc3QgbmV4dCA9IChxdWVyeSkgPT4ge1xuICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXMocXVlcnkpO1xuXG4gICAgY29uc3QgaXNRdWVyeVBhdGggPSBpc1BhdGgocXVlcnkpO1xuXG4gICAgaWYgKCFpc1F1ZXJ5UGF0aCAmJiBrZXlzLmxlbmd0aCA+IDEgJiYgIWlzRXhwcmVzc2lvbihxdWVyeSkpIHtcbiAgICAgIHJldHVybiBuZXh0KGNvbnZlcnRUb0V4cGxpY2l0KHF1ZXJ5KSlcbiAgICB9XG5cbiAgICBpZiAoaXNMZWFmKHF1ZXJ5KSkge1xuICAgICAgY29uc3Qga2V5ID0gaXNRdWVyeVBhdGggPyBxdWVyeVtLZXlUeXBlLlBBVEhdIDoga2V5c1swXTtcblxuICAgICAgY29uc3QgcGF0dGVybiA9IGlzUXVlcnlQYXRoID8gcXVlcnlbS2V5VHlwZS5QQVRURVJOXSA6IHF1ZXJ5W2tleV07XG5cbiAgICAgIGlmICghaXNTdHJpbmcocGF0dGVybikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKExPR0lDQUxfU0VBUkNIX0lOVkFMSURfUVVFUllfRk9SX0tFWShrZXkpKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBvYmogPSB7XG4gICAgICAgIGtleUlkOiBjcmVhdGVLZXlJZChrZXkpLFxuICAgICAgICBwYXR0ZXJuXG4gICAgICB9O1xuXG4gICAgICBpZiAoYXV0bykge1xuICAgICAgICBvYmouc2VhcmNoZXIgPSBjcmVhdGVTZWFyY2hlcihwYXR0ZXJuLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG9ialxuICAgIH1cblxuICAgIGxldCBub2RlID0ge1xuICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgb3BlcmF0b3I6IGtleXNbMF1cbiAgICB9O1xuXG4gICAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcXVlcnlba2V5XTtcblxuICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICBub2RlLmNoaWxkcmVuLnB1c2gobmV4dChpdGVtKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG5vZGVcbiAgfTtcblxuICBpZiAoIWlzRXhwcmVzc2lvbihxdWVyeSkpIHtcbiAgICBxdWVyeSA9IGNvbnZlcnRUb0V4cGxpY2l0KHF1ZXJ5KTtcbiAgfVxuXG4gIHJldHVybiBuZXh0KHF1ZXJ5KVxufVxuXG4vLyBQcmFjdGljYWwgc2NvcmluZyBmdW5jdGlvblxuZnVuY3Rpb24gY29tcHV0ZVNjb3JlKFxuICByZXN1bHRzLFxuICB7IGlnbm9yZUZpZWxkTm9ybSA9IENvbmZpZy5pZ25vcmVGaWVsZE5vcm0gfVxuKSB7XG4gIHJlc3VsdHMuZm9yRWFjaCgocmVzdWx0KSA9PiB7XG4gICAgbGV0IHRvdGFsU2NvcmUgPSAxO1xuXG4gICAgcmVzdWx0Lm1hdGNoZXMuZm9yRWFjaCgoeyBrZXksIG5vcm0sIHNjb3JlIH0pID0+IHtcbiAgICAgIGNvbnN0IHdlaWdodCA9IGtleSA/IGtleS53ZWlnaHQgOiBudWxsO1xuXG4gICAgICB0b3RhbFNjb3JlICo9IE1hdGgucG93KFxuICAgICAgICBzY29yZSA9PT0gMCAmJiB3ZWlnaHQgPyBOdW1iZXIuRVBTSUxPTiA6IHNjb3JlLFxuICAgICAgICAod2VpZ2h0IHx8IDEpICogKGlnbm9yZUZpZWxkTm9ybSA/IDEgOiBub3JtKVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHJlc3VsdC5zY29yZSA9IHRvdGFsU2NvcmU7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1NYXRjaGVzKHJlc3VsdCwgZGF0YSkge1xuICBjb25zdCBtYXRjaGVzID0gcmVzdWx0Lm1hdGNoZXM7XG4gIGRhdGEubWF0Y2hlcyA9IFtdO1xuXG4gIGlmICghaXNEZWZpbmVkKG1hdGNoZXMpKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBtYXRjaGVzLmZvckVhY2goKG1hdGNoKSA9PiB7XG4gICAgaWYgKCFpc0RlZmluZWQobWF0Y2guaW5kaWNlcykgfHwgIW1hdGNoLmluZGljZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCB7IGluZGljZXMsIHZhbHVlIH0gPSBtYXRjaDtcblxuICAgIGxldCBvYmogPSB7XG4gICAgICBpbmRpY2VzLFxuICAgICAgdmFsdWVcbiAgICB9O1xuXG4gICAgaWYgKG1hdGNoLmtleSkge1xuICAgICAgb2JqLmtleSA9IG1hdGNoLmtleS5zcmM7XG4gICAgfVxuXG4gICAgaWYgKG1hdGNoLmlkeCA+IC0xKSB7XG4gICAgICBvYmoucmVmSW5kZXggPSBtYXRjaC5pZHg7XG4gICAgfVxuXG4gICAgZGF0YS5tYXRjaGVzLnB1c2gob2JqKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVNjb3JlKHJlc3VsdCwgZGF0YSkge1xuICBkYXRhLnNjb3JlID0gcmVzdWx0LnNjb3JlO1xufVxuXG5mdW5jdGlvbiBmb3JtYXQoXG4gIHJlc3VsdHMsXG4gIGRvY3MsXG4gIHtcbiAgICBpbmNsdWRlTWF0Y2hlcyA9IENvbmZpZy5pbmNsdWRlTWF0Y2hlcyxcbiAgICBpbmNsdWRlU2NvcmUgPSBDb25maWcuaW5jbHVkZVNjb3JlXG4gIH0gPSB7fVxuKSB7XG4gIGNvbnN0IHRyYW5zZm9ybWVycyA9IFtdO1xuXG4gIGlmIChpbmNsdWRlTWF0Y2hlcykgdHJhbnNmb3JtZXJzLnB1c2godHJhbnNmb3JtTWF0Y2hlcyk7XG4gIGlmIChpbmNsdWRlU2NvcmUpIHRyYW5zZm9ybWVycy5wdXNoKHRyYW5zZm9ybVNjb3JlKTtcblxuICByZXR1cm4gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4ge1xuICAgIGNvbnN0IHsgaWR4IH0gPSByZXN1bHQ7XG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgaXRlbTogZG9jc1tpZHhdLFxuICAgICAgcmVmSW5kZXg6IGlkeFxuICAgIH07XG5cbiAgICBpZiAodHJhbnNmb3JtZXJzLmxlbmd0aCkge1xuICAgICAgdHJhbnNmb3JtZXJzLmZvckVhY2goKHRyYW5zZm9ybWVyKSA9PiB7XG4gICAgICAgIHRyYW5zZm9ybWVyKHJlc3VsdCwgZGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YVxuICB9KVxufVxuXG5jbGFzcyBGdXNlIHtcbiAgY29uc3RydWN0b3IoZG9jcywgb3B0aW9ucyA9IHt9LCBpbmRleCkge1xuICAgIHRoaXMub3B0aW9ucyA9IHsgLi4uQ29uZmlnLCAuLi5vcHRpb25zIH07XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLm9wdGlvbnMudXNlRXh0ZW5kZWRTZWFyY2ggJiZcbiAgICAgICF0cnVlXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoRVhURU5ERURfU0VBUkNIX1VOQVZBSUxBQkxFKVxuICAgIH1cblxuICAgIHRoaXMuX2tleVN0b3JlID0gbmV3IEtleVN0b3JlKHRoaXMub3B0aW9ucy5rZXlzKTtcblxuICAgIHRoaXMuc2V0Q29sbGVjdGlvbihkb2NzLCBpbmRleCk7XG4gIH1cblxuICBzZXRDb2xsZWN0aW9uKGRvY3MsIGluZGV4KSB7XG4gICAgdGhpcy5fZG9jcyA9IGRvY3M7XG5cbiAgICBpZiAoaW5kZXggJiYgIShpbmRleCBpbnN0YW5jZW9mIEZ1c2VJbmRleCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihJTkNPUlJFQ1RfSU5ERVhfVFlQRSlcbiAgICB9XG5cbiAgICB0aGlzLl9teUluZGV4ID1cbiAgICAgIGluZGV4IHx8XG4gICAgICBjcmVhdGVJbmRleCh0aGlzLm9wdGlvbnMua2V5cywgdGhpcy5fZG9jcywge1xuICAgICAgICBnZXRGbjogdGhpcy5vcHRpb25zLmdldEZuLFxuICAgICAgICBmaWVsZE5vcm1XZWlnaHQ6IHRoaXMub3B0aW9ucy5maWVsZE5vcm1XZWlnaHRcbiAgICAgIH0pO1xuICB9XG5cbiAgYWRkKGRvYykge1xuICAgIGlmICghaXNEZWZpbmVkKGRvYykpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuX2RvY3MucHVzaChkb2MpO1xuICAgIHRoaXMuX215SW5kZXguYWRkKGRvYyk7XG4gIH1cblxuICByZW1vdmUocHJlZGljYXRlID0gKC8qIGRvYywgaWR4ICovKSA9PiBmYWxzZSkge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB0aGlzLl9kb2NzLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICBjb25zdCBkb2MgPSB0aGlzLl9kb2NzW2ldO1xuICAgICAgaWYgKHByZWRpY2F0ZShkb2MsIGkpKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQXQoaSk7XG4gICAgICAgIGkgLT0gMTtcbiAgICAgICAgbGVuIC09IDE7XG5cbiAgICAgICAgcmVzdWx0cy5wdXNoKGRvYyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHNcbiAgfVxuXG4gIHJlbW92ZUF0KGlkeCkge1xuICAgIHRoaXMuX2RvY3Muc3BsaWNlKGlkeCwgMSk7XG4gICAgdGhpcy5fbXlJbmRleC5yZW1vdmVBdChpZHgpO1xuICB9XG5cbiAgZ2V0SW5kZXgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX215SW5kZXhcbiAgfVxuXG4gIHNlYXJjaChxdWVyeSwgeyBsaW1pdCA9IC0xIH0gPSB7fSkge1xuICAgIGNvbnN0IHtcbiAgICAgIGluY2x1ZGVNYXRjaGVzLFxuICAgICAgaW5jbHVkZVNjb3JlLFxuICAgICAgc2hvdWxkU29ydCxcbiAgICAgIHNvcnRGbixcbiAgICAgIGlnbm9yZUZpZWxkTm9ybVxuICAgIH0gPSB0aGlzLm9wdGlvbnM7XG5cbiAgICBsZXQgcmVzdWx0cyA9IGlzU3RyaW5nKHF1ZXJ5KVxuICAgICAgPyBpc1N0cmluZyh0aGlzLl9kb2NzWzBdKVxuICAgICAgICA/IHRoaXMuX3NlYXJjaFN0cmluZ0xpc3QocXVlcnkpXG4gICAgICAgIDogdGhpcy5fc2VhcmNoT2JqZWN0TGlzdChxdWVyeSlcbiAgICAgIDogdGhpcy5fc2VhcmNoTG9naWNhbChxdWVyeSk7XG5cbiAgICBjb21wdXRlU2NvcmUocmVzdWx0cywgeyBpZ25vcmVGaWVsZE5vcm0gfSk7XG5cbiAgICBpZiAoc2hvdWxkU29ydCkge1xuICAgICAgcmVzdWx0cy5zb3J0KHNvcnRGbik7XG4gICAgfVxuXG4gICAgaWYgKGlzTnVtYmVyKGxpbWl0KSAmJiBsaW1pdCA+IC0xKSB7XG4gICAgICByZXN1bHRzID0gcmVzdWx0cy5zbGljZSgwLCBsaW1pdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvcm1hdChyZXN1bHRzLCB0aGlzLl9kb2NzLCB7XG4gICAgICBpbmNsdWRlTWF0Y2hlcyxcbiAgICAgIGluY2x1ZGVTY29yZVxuICAgIH0pXG4gIH1cblxuICBfc2VhcmNoU3RyaW5nTGlzdChxdWVyeSkge1xuICAgIGNvbnN0IHNlYXJjaGVyID0gY3JlYXRlU2VhcmNoZXIocXVlcnksIHRoaXMub3B0aW9ucyk7XG4gICAgY29uc3QgeyByZWNvcmRzIH0gPSB0aGlzLl9teUluZGV4O1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcblxuICAgIC8vIEl0ZXJhdGUgb3ZlciBldmVyeSBzdHJpbmcgaW4gdGhlIGluZGV4XG4gICAgcmVjb3Jkcy5mb3JFYWNoKCh7IHY6IHRleHQsIGk6IGlkeCwgbjogbm9ybSB9KSA9PiB7XG4gICAgICBpZiAoIWlzRGVmaW5lZCh0ZXh0KSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBpc01hdGNoLCBzY29yZSwgaW5kaWNlcyB9ID0gc2VhcmNoZXIuc2VhcmNoSW4odGV4dCk7XG5cbiAgICAgIGlmIChpc01hdGNoKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgaXRlbTogdGV4dCxcbiAgICAgICAgICBpZHgsXG4gICAgICAgICAgbWF0Y2hlczogW3sgc2NvcmUsIHZhbHVlOiB0ZXh0LCBub3JtLCBpbmRpY2VzIH1dXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdHNcbiAgfVxuXG4gIF9zZWFyY2hMb2dpY2FsKHF1ZXJ5KSB7XG5cbiAgICBjb25zdCBleHByZXNzaW9uID0gcGFyc2UocXVlcnksIHRoaXMub3B0aW9ucyk7XG5cbiAgICBjb25zdCBldmFsdWF0ZSA9IChub2RlLCBpdGVtLCBpZHgpID0+IHtcbiAgICAgIGlmICghbm9kZS5jaGlsZHJlbikge1xuICAgICAgICBjb25zdCB7IGtleUlkLCBzZWFyY2hlciB9ID0gbm9kZTtcblxuICAgICAgICBjb25zdCBtYXRjaGVzID0gdGhpcy5fZmluZE1hdGNoZXMoe1xuICAgICAgICAgIGtleTogdGhpcy5fa2V5U3RvcmUuZ2V0KGtleUlkKSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5fbXlJbmRleC5nZXRWYWx1ZUZvckl0ZW1BdEtleUlkKGl0ZW0sIGtleUlkKSxcbiAgICAgICAgICBzZWFyY2hlclxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkeCxcbiAgICAgICAgICAgICAgaXRlbSxcbiAgICAgICAgICAgICAgbWF0Y2hlc1xuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbXVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZXZhbHVhdGUoY2hpbGQsIGl0ZW0sIGlkeCk7XG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoKSB7XG4gICAgICAgICAgcmVzLnB1c2goLi4ucmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIGlmIChub2RlLm9wZXJhdG9yID09PSBMb2dpY2FsT3BlcmF0b3IuQU5EKSB7XG4gICAgICAgICAgcmV0dXJuIFtdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNcbiAgICB9O1xuXG4gICAgY29uc3QgcmVjb3JkcyA9IHRoaXMuX215SW5kZXgucmVjb3JkcztcbiAgICBjb25zdCByZXN1bHRNYXAgPSB7fTtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG5cbiAgICByZWNvcmRzLmZvckVhY2goKHsgJDogaXRlbSwgaTogaWR4IH0pID0+IHtcbiAgICAgIGlmIChpc0RlZmluZWQoaXRlbSkpIHtcbiAgICAgICAgbGV0IGV4cFJlc3VsdHMgPSBldmFsdWF0ZShleHByZXNzaW9uLCBpdGVtLCBpZHgpO1xuXG4gICAgICAgIGlmIChleHBSZXN1bHRzLmxlbmd0aCkge1xuICAgICAgICAgIC8vIERlZHVwZSB3aGVuIGFkZGluZ1xuICAgICAgICAgIGlmICghcmVzdWx0TWFwW2lkeF0pIHtcbiAgICAgICAgICAgIHJlc3VsdE1hcFtpZHhdID0geyBpZHgsIGl0ZW0sIG1hdGNoZXM6IFtdIH07XG4gICAgICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0TWFwW2lkeF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBleHBSZXN1bHRzLmZvckVhY2goKHsgbWF0Y2hlcyB9KSA9PiB7XG4gICAgICAgICAgICByZXN1bHRNYXBbaWR4XS5tYXRjaGVzLnB1c2goLi4ubWF0Y2hlcyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHRzXG4gIH1cblxuICBfc2VhcmNoT2JqZWN0TGlzdChxdWVyeSkge1xuICAgIGNvbnN0IHNlYXJjaGVyID0gY3JlYXRlU2VhcmNoZXIocXVlcnksIHRoaXMub3B0aW9ucyk7XG4gICAgY29uc3QgeyBrZXlzLCByZWNvcmRzIH0gPSB0aGlzLl9teUluZGV4O1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcblxuICAgIC8vIExpc3QgaXMgQXJyYXk8T2JqZWN0PlxuICAgIHJlY29yZHMuZm9yRWFjaCgoeyAkOiBpdGVtLCBpOiBpZHggfSkgPT4ge1xuICAgICAgaWYgKCFpc0RlZmluZWQoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGxldCBtYXRjaGVzID0gW107XG5cbiAgICAgIC8vIEl0ZXJhdGUgb3ZlciBldmVyeSBrZXkgKGkuZSwgcGF0aCksIGFuZCBmZXRjaCB0aGUgdmFsdWUgYXQgdGhhdCBrZXlcbiAgICAgIGtleXMuZm9yRWFjaCgoa2V5LCBrZXlJbmRleCkgPT4ge1xuICAgICAgICBtYXRjaGVzLnB1c2goXG4gICAgICAgICAgLi4udGhpcy5fZmluZE1hdGNoZXMoe1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgdmFsdWU6IGl0ZW1ba2V5SW5kZXhdLFxuICAgICAgICAgICAgc2VhcmNoZXJcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCkge1xuICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgIGlkeCxcbiAgICAgICAgICBpdGVtLFxuICAgICAgICAgIG1hdGNoZXNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0c1xuICB9XG4gIF9maW5kTWF0Y2hlcyh7IGtleSwgdmFsdWUsIHNlYXJjaGVyIH0pIHtcbiAgICBpZiAoIWlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cblxuICAgIGxldCBtYXRjaGVzID0gW107XG5cbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlLmZvckVhY2goKHsgdjogdGV4dCwgaTogaWR4LCBuOiBub3JtIH0pID0+IHtcbiAgICAgICAgaWYgKCFpc0RlZmluZWQodGV4dCkpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgaXNNYXRjaCwgc2NvcmUsIGluZGljZXMgfSA9IHNlYXJjaGVyLnNlYXJjaEluKHRleHQpO1xuXG4gICAgICAgIGlmIChpc01hdGNoKSB7XG4gICAgICAgICAgbWF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgIHNjb3JlLFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgdmFsdWU6IHRleHQsXG4gICAgICAgICAgICBpZHgsXG4gICAgICAgICAgICBub3JtLFxuICAgICAgICAgICAgaW5kaWNlc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgeyB2OiB0ZXh0LCBuOiBub3JtIH0gPSB2YWx1ZTtcblxuICAgICAgY29uc3QgeyBpc01hdGNoLCBzY29yZSwgaW5kaWNlcyB9ID0gc2VhcmNoZXIuc2VhcmNoSW4odGV4dCk7XG5cbiAgICAgIGlmIChpc01hdGNoKSB7XG4gICAgICAgIG1hdGNoZXMucHVzaCh7IHNjb3JlLCBrZXksIHZhbHVlOiB0ZXh0LCBub3JtLCBpbmRpY2VzIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtYXRjaGVzXG4gIH1cbn1cblxuRnVzZS52ZXJzaW9uID0gJzcuMC4wJztcbkZ1c2UuY3JlYXRlSW5kZXggPSBjcmVhdGVJbmRleDtcbkZ1c2UucGFyc2VJbmRleCA9IHBhcnNlSW5kZXg7XG5GdXNlLmNvbmZpZyA9IENvbmZpZztcblxue1xuICBGdXNlLnBhcnNlUXVlcnkgPSBwYXJzZTtcbn1cblxue1xuICByZWdpc3RlcihFeHRlbmRlZFNlYXJjaCk7XG59XG5cbmV4cG9ydCB7IEZ1c2UgYXMgZGVmYXVsdCB9O1xuIiwiaW1wb3J0IHsgbWFpbkRpdiwgdGFiTGlzdCwgc2VhcmNoIH0gZnJvbSBcIi4vZWxlbWVudHMuanNcIjtcbmltcG9ydCBGdXNlIGZyb20gXCJmdXNlLmpzXCI7XG5cbm1haW5EaXYuYXBwZW5kQ2hpbGQodGFiTGlzdCk7XG5tYWluRGl2LmFwcGVuZENoaWxkKHNlYXJjaCk7XG5cbmNvbnN0IGZ1c2VPcHRpb25zID0ge1xuICBrZXlzOiBbXCJ0aXRsZVwiLCBcInVybFwiXSxcbn07XG5cbmxldCBzZWxlY3RlZExpc3Q7XG5cbmZ1bmN0aW9uIGRpc3BsYXlUYWJzKHRhYnMpIHtcbiAgdGFiTGlzdC5pbm5lckhUTUwgPSBcIlwiOyAvLyBDbGVhciBwcmV2aW91cyByZXN1bHRzXG4gIGNvbnN0IHF1ZXJ5ID0gc2VhcmNoLnZhbHVlLnRyaW0oKTtcblxuICAvLyBjb25zdCBmaWx0ZXJlZFRhYnMgPSB0YWJzLmZpbHRlcihcbiAgLy8gICAodGFiKSA9PiBmdXp6eU1hdGNoKHF1ZXJ5LCB0YWIudGl0bGUpIHx8IGZ1enp5TWF0Y2gocXVlcnksIHRhYi51cmwpLFxuICAvLyApO1xuICAvL1xuICBjb25zdCBmdXNlID0gbmV3IEZ1c2UodGFicywgZnVzZU9wdGlvbnMpO1xuXG4gIGNvbnN0IGZpbHRlcmVkVGFicyA9XG4gICAgcXVlcnkgPT09IFwiXCIgPyB0YWJzIDogZnVzZS5zZWFyY2gocXVlcnkpLm1hcCgocmVzdWx0KSA9PiByZXN1bHQuaXRlbSk7XG5cbiAgZmlsdGVyZWRUYWJzLnJldmVyc2UoKTtcblxuICBmaWx0ZXJlZFRhYnMuZm9yRWFjaCgodGFiLCBpbmRleCwgYXJyYXkpID0+IHtcbiAgICBjb25zdCBsaXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICBsaXN0SXRlbS5jbGFzc0xpc3QuYWRkKFwiZnV6enktdGFiLXNlYXJjaC10YWItbGlzdC1pdGVtXCIpO1xuICAgIGNvbnN0IGhvc3RuYW1lID0gbmV3IFVSTCh0YWIudXJsKS5ob3N0bmFtZTtcbiAgICBsaXN0SXRlbS50ZXh0Q29udGVudCA9IGhvc3RuYW1lICsgXCIgOiBcIiArIHRhYi50aXRsZTtcblxuICAgIGlmIChpbmRleCA9PT0gYXJyYXkubGVuZ3RoIC0gMSkge1xuICAgICAgc2VsZWN0ZWRMaXN0ID0gbGlzdEl0ZW07XG4gICAgICBzZWxlY3RlZExpc3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJncmF5XCI7IC8vIEhpZ2hsaWdodCBuZXcgc2VsZWN0aW9uXG4gICAgfVxuXG4gICAgbGlzdEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgYWN0aW9uOiBcImhpZ2hsaWdodFRhYlwiLFxuICAgICAgICB0YWJJbmRleDogdGFiLmluZGV4LFxuICAgICAgfSk7XG5cbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobWFpbkRpdik7XG4gICAgfSk7XG5cbiAgICB0YWJMaXN0LmFwcGVuZENoaWxkKGxpc3RJdGVtKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGZldGNoQW5kRGlzcGxheVRhYnMoKSB7XG4gIGNvbnN0IHNlYXJjaFF1ZXJ5ID0gc2VhcmNoLnZhbHVlO1xuXG4gIC8vIFJlcXVlc3QgdGFiIGluZm9ybWF0aW9uIGZyb20gdGhlIGJhY2tncm91bmQgc2NyaXB0XG4gIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHsgYWN0aW9uOiBcImdldFRhYnNcIiB9LCAodGFicykgPT4ge1xuICAgIGlmICh0YWJzKSB7XG4gICAgICBkaXNwbGF5VGFicyh0YWJzLCBzZWFyY2hRdWVyeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggdGFicy5cIik7XG4gICAgfVxuICB9KTtcbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIC8vIENoZWNrIGlmIHRoZSBDb250cm9sIGtleSBpcyBwcmVzc2VkIGFuZCB0aGUgRiBrZXkgaXMgcHJlc3NlZFxuICBpZiAoZXZlbnQuY3RybEtleSAmJiBldmVudC5rZXkgPT09IFwiZlwiKSB7XG4gICAgc2VhcmNoLnZhbHVlID0gXCJcIjtcbiAgICBmZXRjaEFuZERpc3BsYXlUYWJzKCk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBicm93c2VyIGFjdGlvbiAoZS5nLiwgb3BlbmluZyB0aGUgc2VhcmNoIGJhcilcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1haW5EaXYpO1xuICAgIHNlYXJjaC5mb2N1cygpO1xuICAgIGNvbnNvbGUubG9nKFwidGVzdFwiKTtcbiAgfVxufSk7XG5cbm1haW5EaXYuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIC8vIENoZWNrIGlmIHRoZSBDb250cm9sIGtleSBpcyBwcmVzc2VkIGFuZCB0aGUgRiBrZXkgaXMgcHJlc3NlZFxuICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtYWluRGl2KTtcbiAgfVxufSk7XG5cbi8vIEV2ZW50IGxpc3RlbmVyIGZvciBpbnB1dFxuc2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmZXRjaEFuZERpc3BsYXlUYWJzKTtcblxuc2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICBzZWxlY3RlZExpc3QuY2xpY2soKTtcbiAgfSBlbHNlIGlmIChldmVudC5jdHJsS2V5ICYmIGV2ZW50LmtleSA9PT0gXCJwXCIpIHtcbiAgICBpZiAoc2VsZWN0ZWRMaXN0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcpIHtcbiAgICAgIHNlbGVjdGVkTGlzdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIlwiOyAvLyBSZW1vdmUgY3VycmVudCBzZWxlY3Rpb25cbiAgICAgIHNlbGVjdGVkTGlzdCA9IHNlbGVjdGVkTGlzdC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOyAvLyBVcGRhdGUgcmVmZXJlbmNlXG4gICAgICBzZWxlY3RlZExpc3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJncmF5XCI7IC8vIEhpZ2hsaWdodCBuZXcgc2VsZWN0aW9uXG4gICAgfVxuICB9IGVsc2UgaWYgKGV2ZW50LmN0cmxLZXkgJiYgZXZlbnQua2V5ID09PSBcIm5cIikge1xuICAgIC8vIE1vdmUgdG8gdGhlIG5leHQgc2libGluZ1xuICAgIGlmIChzZWxlY3RlZExpc3QubmV4dEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgICBzZWxlY3RlZExpc3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJcIjsgLy8gUmVtb3ZlIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgICBzZWxlY3RlZExpc3QgPSBzZWxlY3RlZExpc3QubmV4dEVsZW1lbnRTaWJsaW5nOyAvLyBVcGRhdGUgcmVmZXJlbmNlXG4gICAgICBzZWxlY3RlZExpc3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJncmF5XCI7IC8vIEhpZ2hsaWdodCBuZXcgc2VsZWN0aW9uXG4gICAgfVxuICB9XG59KTtcbiJdLCJuYW1lcyI6WyJtYWluRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwidGFiSW5kZXgiLCJ0YWJMaXN0Iiwic2VhcmNoIiwiaXNBcnJheSIsInZhbHVlIiwiQXJyYXkiLCJnZXRUYWciLCJpc1N0cmluZyIsImlzTnVtYmVyIiwiaXNPYmplY3QiLCJpc0RlZmluZWQiLCJpc0JsYW5rIiwidHJpbSIsImxlbmd0aCIsInVuZGVmaW5lZCIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsImF1dG9mb2N1cyIsImhhc093biIsImhhc093blByb3BlcnR5IiwiS2V5U3RvcmUiLCJjb25zdHJ1Y3RvciIsImtleXMiLCJ0aGlzIiwiX2tleXMiLCJfa2V5TWFwIiwidG90YWxXZWlnaHQiLCJmb3JFYWNoIiwia2V5Iiwib2JqIiwiY3JlYXRlS2V5IiwicHVzaCIsImlkIiwid2VpZ2h0IiwiZ2V0Iiwia2V5SWQiLCJ0b0pTT04iLCJKU09OIiwic3RyaW5naWZ5IiwicGF0aCIsInNyYyIsImdldEZuIiwiY3JlYXRlS2V5UGF0aCIsImNyZWF0ZUtleUlkIiwiRXJyb3IiLCJuYW1lIiwiSU5WQUxJRF9LRVlfV0VJR0hUX1ZBTFVFIiwic3BsaXQiLCJqb2luIiwiQ29uZmlnIiwiaXNDYXNlU2Vuc2l0aXZlIiwiaW5jbHVkZVNjb3JlIiwic2hvdWxkU29ydCIsInNvcnRGbiIsImEiLCJiIiwic2NvcmUiLCJpZHgiLCJpbmNsdWRlTWF0Y2hlcyIsImZpbmRBbGxNYXRjaGVzIiwibWluTWF0Y2hDaGFyTGVuZ3RoIiwibG9jYXRpb24iLCJ0aHJlc2hvbGQiLCJkaXN0YW5jZSIsInVzZUV4dGVuZGVkU2VhcmNoIiwibGlzdCIsImFyciIsImRlZXBHZXQiLCJpbmRleCIsImlzT2JqZWN0TGlrZSIsImlzQm9vbGVhbiIsInJlc3VsdCIsImJhc2VUb1N0cmluZyIsImkiLCJsZW4iLCJpZ25vcmVMb2NhdGlvbiIsImlnbm9yZUZpZWxkTm9ybSIsImZpZWxkTm9ybVdlaWdodCIsIlNQQUNFIiwiRnVzZUluZGV4Iiwibm9ybSIsIm1hbnRpc3NhIiwiY2FjaGUiLCJNYXAiLCJtIiwiTWF0aCIsInBvdyIsIm51bVRva2VucyIsIm1hdGNoIiwiaGFzIiwibiIsInBhcnNlRmxvYXQiLCJyb3VuZCIsInNldCIsImNsZWFyIiwiaXNDcmVhdGVkIiwic2V0SW5kZXhSZWNvcmRzIiwic2V0U291cmNlcyIsImRvY3MiLCJyZWNvcmRzIiwic2V0S2V5cyIsIl9rZXlzTWFwIiwiY3JlYXRlIiwiZG9jIiwiZG9jSW5kZXgiLCJfYWRkU3RyaW5nIiwiX2FkZE9iamVjdCIsInNpemUiLCJyZW1vdmVBdCIsInNwbGljZSIsImdldFZhbHVlRm9ySXRlbUF0S2V5SWQiLCJpdGVtIiwicmVjb3JkIiwidiIsIiQiLCJrZXlJbmRleCIsInN1YlJlY29yZHMiLCJzdGFjayIsIm5lc3RlZEFyckluZGV4IiwicG9wIiwic3ViUmVjb3JkIiwiayIsImNyZWF0ZUluZGV4IiwibXlJbmRleCIsIm1hcCIsImNvbXB1dGVTY29yZSQxIiwicGF0dGVybiIsImVycm9ycyIsImN1cnJlbnRMb2NhdGlvbiIsImV4cGVjdGVkTG9jYXRpb24iLCJhY2N1cmFjeSIsInByb3hpbWl0eSIsImFicyIsIk1BWF9CSVRTIiwiY3JlYXRlUGF0dGVybkFscGhhYmV0IiwibWFzayIsImNoYXIiLCJjaGFyQXQiLCJCaXRhcFNlYXJjaCIsIm9wdGlvbnMiLCJ0b0xvd2VyQ2FzZSIsImNodW5rcyIsImFkZENodW5rIiwic3RhcnRJbmRleCIsImFscGhhYmV0IiwicmVtYWluZGVyIiwiZW5kIiwic3Vic3RyIiwic2VhcmNoSW4iLCJ0ZXh0IiwiaXNNYXRjaCIsImluZGljZXMiLCJhbGxJbmRpY2VzIiwidG90YWxTY29yZSIsImhhc01hdGNoZXMiLCJwYXR0ZXJuQWxwaGFiZXQiLCJwYXR0ZXJuTGVuIiwidGV4dExlbiIsIm1heCIsIm1pbiIsImN1cnJlbnRUaHJlc2hvbGQiLCJiZXN0TG9jYXRpb24iLCJjb21wdXRlTWF0Y2hlcyIsIm1hdGNoTWFzayIsImluZGV4T2YiLCJsYXN0Qml0QXJyIiwiZmluYWxTY29yZSIsImJpbk1heCIsImJpbk1pbiIsImJpbk1pZCIsImZsb29yIiwic3RhcnQiLCJmaW5pc2giLCJiaXRBcnIiLCJqIiwiY2hhck1hdGNoIiwibWF0Y2htYXNrIiwiY29udmVydE1hc2tUb0luZGljZXMiLCJCYXNlTWF0Y2giLCJpc011bHRpTWF0Y2giLCJnZXRNYXRjaCIsIm11bHRpUmVnZXgiLCJpc1NpbmdsZU1hdGNoIiwic2luZ2xlUmVnZXgiLCJleHAiLCJtYXRjaGVzIiwiRnV6enlNYXRjaCIsInN1cGVyIiwiX2JpdGFwU2VhcmNoIiwidHlwZSIsIkluY2x1ZGVNYXRjaCIsInNlYXJjaGVycyIsInN0YXJ0c1dpdGgiLCJlbmRzV2l0aCIsInNlYXJjaGVyc0xlbiIsIlNQQUNFX1JFIiwiTXVsdGlNYXRjaFNldCIsIlNldCIsInJlZ2lzdGVyZWRTZWFyY2hlcnMiLCJjcmVhdGVTZWFyY2hlciIsInNlYXJjaGVyQ2xhc3MiLCJjb25kaXRpb24iLCJMb2dpY2FsT3BlcmF0b3IiLCJLZXlUeXBlIiwiaXNFeHByZXNzaW9uIiwicXVlcnkiLCJjb252ZXJ0VG9FeHBsaWNpdCIsInBhcnNlIiwiYXV0byIsIm5leHQiLCJpc1F1ZXJ5UGF0aCIsImlzUGF0aCIsImlzTGVhZiIsIkxPR0lDQUxfU0VBUkNIX0lOVkFMSURfUVVFUllfRk9SX0tFWSIsInNlYXJjaGVyIiwibm9kZSIsImNoaWxkcmVuIiwib3BlcmF0b3IiLCJ0cmFuc2Zvcm1NYXRjaGVzIiwiZGF0YSIsInJlZkluZGV4IiwidHJhbnNmb3JtU2NvcmUiLCJGdXNlIiwiX2tleVN0b3JlIiwic2V0Q29sbGVjdGlvbiIsIl9kb2NzIiwiX215SW5kZXgiLCJyZW1vdmUiLCJwcmVkaWNhdGUiLCJyZXN1bHRzIiwiZ2V0SW5kZXgiLCJsaW1pdCIsIl9zZWFyY2hTdHJpbmdMaXN0IiwiX3NlYXJjaE9iamVjdExpc3QiLCJfc2VhcmNoTG9naWNhbCIsIk51bWJlciIsIkVQU0lMT04iLCJjb21wdXRlU2NvcmUiLCJzb3J0Iiwic2xpY2UiLCJ0cmFuc2Zvcm1lcnMiLCJ0cmFuc2Zvcm1lciIsImZvcm1hdCIsImV4cHJlc3Npb24iLCJldmFsdWF0ZSIsIl9maW5kTWF0Y2hlcyIsInJlcyIsImNoaWxkIiwicmVzdWx0TWFwIiwiZXhwUmVzdWx0cyIsInZlcnNpb24iLCJwYXJzZUluZGV4IiwiY29uZmlnIiwicGFyc2VRdWVyeSIsImFyZ3MiLCJyZWdpc3RlciIsImZpbHRlciIsInF1ZXJ5SXRlbSIsImZvdW5kIiwidG9rZW4iLCJfIiwibnVtTWF0Y2hlcyIsInFMZW4iLCJwTGVuIiwiYXBwZW5kQ2hpbGQiLCJmdXNlT3B0aW9ucyIsInNlbGVjdGVkTGlzdCIsImZldGNoQW5kRGlzcGxheVRhYnMiLCJjaHJvbWUiLCJydW50aW1lIiwic2VuZE1lc3NhZ2UiLCJhY3Rpb24iLCJ0YWJzIiwiaW5uZXJIVE1MIiwiZnVzZSIsImZpbHRlcmVkVGFicyIsInJldmVyc2UiLCJ0YWIiLCJhcnJheSIsImxpc3RJdGVtIiwiaG9zdG5hbWUiLCJVUkwiLCJ1cmwiLCJ0ZXh0Q29udGVudCIsInRpdGxlIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJhZGRFdmVudExpc3RlbmVyIiwiYm9keSIsInJlbW92ZUNoaWxkIiwiZGlzcGxheVRhYnMiLCJjb25zb2xlIiwiZXJyb3IiLCJldmVudCIsImN0cmxLZXkiLCJwcmV2ZW50RGVmYXVsdCIsImZvY3VzIiwibG9nIiwiY2xpY2siLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwibmV4dEVsZW1lbnRTaWJsaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==